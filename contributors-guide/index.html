<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.css">
<link href="/css/accumulo.css" rel="stylesheet" type="text/css">

<title>Contributor Guide</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.js"></script>
<script>
  // show location of canonical site if not currently on the canonical site
  $(function() {
    var host = window.location.host;
    if (typeof host !== 'undefined' && host !== 'accumulo.apache.org') {
      $('#non-canonical').show();
    }
  });

  $(function() {
    // decorate section headers with anchors
    return $("h2, h3, h4, h5, h6").each(function(i, el) {
      var $el, icon, id;
      $el = $(el);
      id = $el.attr('id');
      icon = '<i class="fa fa-link"></i>';
      if (id) {
        return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
      }
    });
  });

  // fix sidebar width in documentation
  $(function() {
    var $affixElement = $('div[data-spy="affix"]');
    $affixElement.width($affixElement.parent().width());
  });
</script>

<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-50934829-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-50934829-1');
</script>

</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/"><img id="nav-logo" alt="Apache Accumulo" class="img-responsive" src="/images/accumulo-logo.png" width="200"
        /></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="nav navbar-nav">
        <li class="nav-link"><a href="/downloads">Download</a></li>
        <li class="nav-link"><a href="/tour">Tour</a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Releases<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/release/accumulo-1.8.1/">1.8.1 (Latest)</a></li>
            <li><a href="/release/accumulo-1.7.3/">1.7.3</a></li>
            <li><a href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Documentation<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a href="/1.8/accumulo_user_manual.html">User Manual (1.8)</a></li>
            <li><a href="/1.8/apidocs">Javadocs (1.8)</a></li>
            <li><a href="/1.8/examples">Examples (1.8)</a></li>
            <li><a href="/features">Features</a></li>
            <li><a href="/glossary">Glossary</a></li>
            <li><a href="/external-docs">External Docs</a></li>
            <li><a href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/contact-us">Contact Us</a></li>
            <li><a href="/how-to-contribute">How To Contribute</a></li>
            <li><a href="/people">People</a></li>
            <li><a href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="https://www.apache.org">Apache Homepage <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/security">Security <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/thanks">Thanks <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <i class="fa fa-external-link"></i></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Contributor Guide</h1>
          
          <p>This page contains resources and documentation of interest to current and potential contributors to the Accumulo project. Any documentation that is helpful to Accumulo users should go in the <a href="/1.8/accumulo_user_manual.html">Accumulo User Manual</a>.</p>

<p>If your are interested in quickly getting an Accumulo instance up and running, see the Accumulo Quickstart guides <a href="/quickstart-1.x/">(1.x)</a>/<a href="/quickstart-2.x/">(2.x)</a> or refer to the <a href="https://github.com/astralway/uno">Uno</a> project on Github.</p>

<ul>
  <li><a href="#how-to-contribute-to-apache-accumulo">How to contribute to Apache Accumulo</a></li>
  <li><a href="#project-resources">Project Resources</a>
    <ul>
      <li><a href="#github">GitHub</a></li>
      <li><a href="#jira">JIRA</a></li>
      <li><a href="#jenkinstravisci">Jenkins/TravisCI</a></li>
    </ul>
  </li>
  <li><a href="#create-a-ticket-for-new-bugs-or-feature">Create a Ticket for Bugs or New Features</a></li>
  <li><a href="#building-accumulo-from-source">Building Accumulo from Source</a>
    <ul>
      <li><a href="#installing-apache-thrift">Installing Apache Thrift</a></li>
      <li><a href="#checking-out-from-git">Checking out from Git</a></li>
      <li><a href="#running-a-build">Running a Build</a></li>
    </ul>
  </li>
  <li><a href="#providing-a-contribution">Providing a contribution</a>
    <ul>
      <li><a href="#proposed-workflow">Proposed Workflow</a></li>
      <li><a href="#the-implementation">The Implementation</a>
        <ul>
          <li><a href="#contributors">Contributors</a></li>
          <li><a href="#developers">Developers</a>
            <ul>
              <li><a href="#primary-development">Primary Development</a></li>
              <li><a href="#reviewing-contributor-changes">Reviewing Contributor Changes</a></li>
              <li><a href="#submit-contribution-via-patch">Submit Contribution via Patch</a></li>
              <li><a href="#submit-contribution-via-pull-request">Submit Contribution via Pull Request</a></li>
              <li><a href="#feature-branches">Feature Branches</a></li>
              <li><a href="#changes-which-affect-multiple-versions-aka-merging">Changes Which Affect Multiple-Versions (a.k.a Merging)</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#code-review-process">Code Review Process</a></li>
  <li><a href="#additional-contributor-information">Additional Contributor Information</a>
    <ul>
      <li><a href="#coding-practices">Coding Practices</a></li>
      <li><a href="#merging-practices">Merging Practices</a></li>
      <li><a href="#project-examples">Project Examples</a></li>
      <li><a href="#website-contributions">Website Contributions</a></li>
      <li><a href="#public-api">Public API</a></li>
      <li><a href="/contributor/contrib-projects">Contrib Projects</a></li>
    </ul>
  </li>
  <li><a href="#committer-documentation">Committer Documentation</a></li>
  <li><a href="#project-governance">Project Governance</a></li>
</ul>

<h2 id="how-to-contribute-to-apache-accumulo">How to Contribute to Apache Accumulo</h2>

<p>Apache Accumulo welcomes contributions from the community. This is especially true of new contributors! You don’t need to be a software developer to contribute to Apache Accumulo. So, if you want to get involved in Apache Accumulo, there is almost certainly a role for you. View our <a href="/how-to-contribute/">How to Contribute</a> page for additional details on the many opportunities available.</p>

<h2 id="project-resources">Project Resources</h2>

<p>Accumulo makes use of the following external tools for development.</p>

<h3 id="github">GitHub</h3>

<p>Apache Accumulo® source code is maintained using <a href="https://git-scm.com/">Git</a> version control and mirrored to <a href="https://github.com/apache/accumulo">GitHub</a>. Source files can be browsed <a href="https://gitbox.apache.org/repos/asf?p=accumulo.git;a=summary">here</a> or at the <a href="https://github.com/apache/accumulo">GitHub mirror</a>.</p>

<p>The project code can be checked-out <a href="https://github.com/apache/accumulo">here</a>. It builds with <a href="https://maven.apache.org">Apache Maven</a>.</p>

<h3 id="jira">JIRA</h3>

<p>Accumulo <a href="https://issues.apache.org/jira/browse/ACCUMULO">tracks issues</a> with <a href="https://www.atlassian.com/software/jira">JIRA</a>. Prospective code contributors can view <a href="https://s.apache.org/newbie_accumulo_tickets">open issues labeled for “newbies”</a> to search for starter tickets. Note that every commit should reference a JIRA ticket of the form ACCUMULO-#.</p>

<h3 id="jenkinstravisci">Jenkins/TravisCI</h3>

<p>Accumulo uses <a href="https://builds.apache.org/view/A/view/Accumulo">Jenkins</a> and <a href="https://travis-ci.org/apache/accumulo">TravisCI</a> for automatic builds and continuous integration.</p>

<p><img src="https://builds.apache.org/job/Accumulo-Master/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-Master">Master</a></p>

<p><img src="https://builds.apache.org/job/Accumulo-1.8/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-1.8">1.8 Branch</a></p>

<p><img src="https://builds.apache.org/job/Accumulo-1.7/lastBuild/buildStatus" style="height: 1.1em" /> <a href="https://builds.apache.org/job/Accumulo-1.7">1.7 Branch</a></p>

<h2 id="create-a-ticket-for-new-bugs-or-feature">Create a Ticket for New Bugs or Feature</h2>

<p>If you run into a bug or think there is something that would benefit the project, we encourage you to file an issue at the <a href="https://issues.apache.org/jira/browse/ACCUMULO">Apache Accumulo JIRA</a> page. Regardless of whether you have the time to provide the fix or implementation yourself, this will be helpful to the project.</p>

<h2 id="building-accumulo-from-source">Building Accumulo from Source</h2>

<h3 id="installing-apache-thrift">Installing Apache Thrift</h3>

<p>If you activate the ‘thrift’ Maven profile, the build of some modules will attempt to run the Apache Thrift command line to regenerate
stubs. If you activate this profile and don’t have Apache Thrift installed and in your path, you will see a warning and
your build will fail. For Accumulo 1.5.0 and greater, install Thrift 0.9 and make sure that the ‘thrift’ command is in your path. 
Watch out for THRIFT-1367; you may need to configure Thrift with –without-ruby. Most developers do not
need to install or modify the Thrift definitions as a part of developing against Apache Accumulo.</p>

<h3 id="checking-out-from-git">Checking out from Git</h3>

<p>There are several methods for obtaining the Accumulo source code. If you prefer to use SSH rather than HTTPS you can refer to the <a href="https://help.github.com/">GitHub help pages</a> for help in creating a GitHub account and setting up <a href="https://help.github.com/articles/connecting-to-github-with-ssh/">SSH keys</a>.</p>

<h4 id="--from-your-github-fork">- from your Github Fork</h4>

<p>It is also possible to <a href="https://help.github.com/articles/fork-a-repo/">fork</a> a repository in GitHub so that you can freely experiment with changes without affecting the original project. You can then submit a <a href="https://help.github.com/articles/about-pull-requests/">pull request</a> from your personal fork to the project repository when you wish to supply a contribution.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@github.com:&lt;account name&gt;/accumulo.git
</code></pre></div></div>

<h5 id="retrieval-of-upstream-changes">Retrieval of upstream changes</h5>

<p>Additionally, it is beneficial to add a git remote for the mirror to allow the retrieval of upstream changes.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add upstream http://github.com/apache/accumulo.git
</code></pre></div></div>

<h4 id="--from-the-github-mirror">- from the Github Mirror</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/apache/accumulo.git
</code></pre></div></div>

<h4 id="--from-the-apache-hosted-repository">- from the Apache Hosted Repository</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://gitbox.apache.org/repos/asf/accumulo.git
</code></pre></div></div>

<h2 id="running-a-build">Running a Build</h2>

<p>Accumulo uses <a href="https://maven.apache.org">Apache Maven</a> to handle source building, testing, and packaging. To build Accumulo, you will need to use Maven version 3.0.5 or later.</p>

<p>You should familiarize yourself with the <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle">Maven Build Lifecycle</a>, as well as the various plugins we use in our <a href="https://gitbox.apache.org/repos/asf?p=accumulo.git;a=blob_plain;f=pom.xml;hb=HEAD">POM</a>, in order to understand how Maven works and how to use the various build options while building Accumulo.</p>

<p>To build from source (for example, to deploy):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package -Passemble
</code></pre></div></div>

<p>This will create a file <code class="highlighter-rouge">accumulo-*-SNAPSHOT-dist.tar.gz</code> in the assemble/target directory. Optionally, append <code class="highlighter-rouge">-DskipTests</code> if you want to skip the build tests.</p>

<p>To build your branch before submitting a pull request, you’ll probably want to run some basic “sunny-day” integration tests to ensure you haven’t made any grave errors, as well as <code class="highlighter-rouge">checkstyle</code> and <code class="highlighter-rouge">findbugs</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn verify -Psunny
</code></pre></div></div>

<p>To run specific unit tests, you can run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package -Dtest=MyTest -DfailIfNoTests=false
</code></pre></div></div>

<p>Or to run the specific integration tests MyIT and YourIT (and skip all unit tests), you can run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn verify -Dtest=NoSuchTestExists -Dit.test=MyIT,YourIT -DfailIfNoTests=false
</code></pre></div></div>

<p>There are plenty of other options. For example, you can skip findbugs with <code class="highlighter-rouge">mvn verify -Dfindbugs.skip</code> or checkstyle <code class="highlighter-rouge">-Dcheckstyle.skip</code>, or control the number of forks to use while executing tests, <code class="highlighter-rouge">-DforkCount=4</code>, etc. You should check with specific plugins to see which command-line options are available to control their behavior. Note that not all options will result in a stable build, and options may change over time.</p>

<p>If you regularly switch between major development branches, you may receive errors about improperly licensed files from the <a href="https://creadur.apache.org/rat/apache-rat-plugin">RAT plugin</a>. This is caused by modules that exist in one branch and not the other leaving Maven build files that the RAT plugin no longer understands how to ignore.</p>

<p>The easiest fix is to ensure all of your current changes are stored in git and then cleaning your workspace.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; git add path/to/file/that/has/changed
$&gt; git add path/to/other/file
$&gt; git clean -df
</code></pre></div></div>

<p>Note that this git clean command will delete any files unknown to git in a way that is irreversible. You should check that no important files will be included by first looking at the “untracked files” section in a <code class="highlighter-rouge">git status</code> command.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; git status
# On branch master
nothing to commit (working directory clean)
$&gt; mvn package
{ maven output elided }
$&gt; git checkout 1.6.1-SNAPSHOT
Switched to branch '1.6.1-SNAPSHOT'
$&gt; git status
# On branch 1.6.1-SNAPSHOT
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
# mapreduce/
# shell/
nothing added to commit but untracked files present (use "git add" to track)
$&gt; git clean -df
Removing mapreduce/
Removing shell/
$&gt; git status
# On branch 1.6.1-SNAPSHOT
nothing to commit (working directory clean)
</code></pre></div></div>

<h2 id="providing-a-contribution">Providing a Contribution</h2>

<p>The Accumulo source is hosted at <a href="https://gitbox.apache.org/repos/asf?p=accumulo.git;a=summary">https://gitbox.apache.org/</a> .</p>

<p>Like all Apache projects, a mirror of the git repository is also located on GitHub at <a href="https://github.com/apache/accumulo">https://github.com/apache/accumulo</a> which provides ease in <a href="https://help.github.com/articles/fork-a-repo/">forking</a> and generating <a href="https://help.github.com/articles/using-pull-requests/">pull requests (PRs)</a>.</p>

<h3 id="git">Git</h3>

<p><a href="https://git-scm.com/">Git</a> is an open source, distributed version control system
which has become very popular in large, complicated software projects due to
its efficient handling of multiple, simultaneously and independently developed
branches of source code.</p>

<h3 id="workflow-background">Workflow Background</h3>

<p>The most likely contested subject matter regarding switching an active team
from one SCM tool to another is a shift in the development paradigm.</p>

<p>Some background, the common case, as is present with this team, is that
developers coming from a Subversion history are very light on merging being a
critical consideration on how to perform development. Because merging in
Subversion is typically of no consequence to the complete view of history, not
to mention that Subversion allows “merging” of specific revisions instead of
sub-trees. As such, a transition to Git typically requires a shift in mindset
in which a fix is not arbitrarily applied to trunk (whatever the main
development is called), but the fix should be applied to the earliest, non
end-of-life (EOL) version of the application.</p>

<p>For example, say there is a hypothetical application which has just released
version-3 of their software and have shifted their development to a version-4
WIP. Version-2 is still supported, while version-1 was just EOL’ed. Each
version still has a branch. A bug was just found which affects all released
versions of this application. In Subversion, considering the history in the
repository, it is of no consequence where the change is initially applied,
because a Subversion merge is capable of merging it to any other version.
History does not suffer because Subversion doesn’t have the capacities to
accurately track the change across multiple branches. In Git, to maintain a
non-duplicative history, it is imperative that the developer choose the correct
branch to fix the bug in. In this case, since version-1 is EOL’ed, version-2,
version-3 and the WIP version-4 are candidates. The earliest version is
obviously version-2; so, the change should be applied in version-2, merged to
version-3 and then the version-4 WIP.</p>

<p>The importance of this example is making a best-attempt to preserve history
when using Git. While Git does have commands like cherry-pick which allow the
contents of a commit to be applied from one branch to another which are not
candidates to merge without conflict (which is typically the case when merging
a higher version into a lower version), this results in a duplication of that
commit in history when the two trees are eventually merged together. While Git
is smart enough to not attempt to re-apply the changes, history still contains
the blemish.</p>

<p>The purpose of this extravagant example is to outline, in the trivial case, how
the workflow decided upon for development is very important and has direct
impact on the efficacy of the advanced commands bundled with Git.</p>

<h3 id="proposed-workflow">Proposed Workflow</h3>

<p>This is a summary of what has been agreed upon by vocal committers/PMC members
on <a href="mailto:dev@accumulo.apache.org">dev@accumulo.apache.org</a>. Enumeration of
every possible situation out of the scope of this document. This document
intends to lay the ground work to define the correct course of action regardless
of circumstances. Some concrete examples will be provided to ensure the
explanation is clear.</p>

<ol>
  <li>
    <p>Active development is performed concurrently over no less than two versions
of Apache Accumulo at any one point in time. As such, the workflow must
provide guidance on how and where changes should be made which apply to
multiple versions and how to ensure that such changes are contained in all
applicable versions.</p>
  </li>
  <li>
    <p>Releases are considered extremely onerous and time-consuming so no emphasis
is placed on rapid iterations or development-cycles.</p>
  </li>
  <li>
    <p>New features typically have lengthy development cycles in which more than
one developer contributes to the creation of the new feature from planning,
to implementation, to scale testing. Mechanisms/guidance should be provided
for multiple developers to teach contribute to a remote-shared resource.</p>
  </li>
  <li>
    <p>The repository should be the irrefutable, sole source of information
regarding the development of Apache Accumulo, and, as such, should have
best-efforts given in creating a clean, readable history without any single
entity having to control all write access and changes (a proxy). In other
words, the developers are the ones responsible for ensuring that previous
releases are preserved to meet ASF policy, for not rewriting any public
history of code not yet officially released (also ASF policy relevant) and
for a best-effort to be given to avoid duplicative commits appearing in
 history created by the application of multiple revisions which have
 different identifying attributes but the same contents (git-rebase and
 git-cherry-pick).</p>
  </li>
</ol>

<h2 id="the-implementation">The Implementation</h2>

<p>The following steps, originally derived from Apache kafka’s 
<a href="https://cwiki.apache.org/confluence/display/KAFKA/Patch+submission+and+review#Patchsubmissionandreview-Simplecontributorworkflow">simple contributor workflow</a>, will demonstrate the gitflow implementation.</p>

<h3 id="contributors">Contributors</h3>

<p>To be specific, let’s consider a contributor wanting to work on a fix for the
Jira issue ACCUMULO-12345 that affects the 1.8 release.</p>

<ol>
  <li>
    <p>Ensure you configured Git with your information</p>

    <p><code class="highlighter-rouge">git config --global user.name 'My Name' &amp;&amp; git config --global user.email
 'myname@mydomain.com'</code></p>
  </li>
  <li>
    <p>Clone the Accumulo repository:</p>

    <p><code class="highlighter-rouge">git clone https://gitbox.apache.org/repos/asf/accumulo.git accumulo</code></p>
  </li>
  <li>
    <p>or update your local copy:</p>

    <p><code class="highlighter-rouge">git fetch &amp;&amp; git fetch --tags</code></p>
  </li>
  <li>
    <p>For the given issue you intend to work on, choose the ‘lowest’ fixVersion
and create a branch for yourself to work in. This example is against the next release of 1.8</p>

    <p><code class="highlighter-rouge">git checkout -b ACCUMULO-12345-my-work origin/1.8</code></p>
  </li>
  <li>
    <p>Make commits as you see fit as you fix the issue, referencing the issue name
in the commit message:</p>

    <p><code class="highlighter-rouge">git commit -av</code></p>

    <p>Please include the ticket number at the beginning of the log message, and
 in the first line, as it’s easier to parse quickly. For example:</p>

    <p><code class="highlighter-rouge">ACCUMULO-2428 throw exception when rename fails after compaction</code></p>

    <p>Consider following the git log message format described in
 <a href="https://zachholman.com/talk/more-git-and-github-secrets/">Zach Holman’s talk</a>
 (specifically slides 78-98, beginning at 15:20 into the video). Essentially,
 leave a short descriptive message in the first line, skip a line, and write
 more detailed stuff there, if you need to. For example:</p>
  </li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ACCUMULO-2194 Add delay for randomwalk Security teardown

    If two Security randomwalk tests run back-to-back, the second test may see that the
    table user still exists even though it was removed when the first test was torn down.
    This can happen if the user drop does not propagate through Zookeeper quickly enough.
    This commit adds a delay to the end of the Security test to give ZK some time.
</code></pre></div></div>

<ol>
  <li>
    <p>Assuming others are developing against the version you also are, as you
work, or before you create your patch, rebase your branch against the remote
to lift your changes to the top of your branch. The branch specified here should be the same one you used in step 4.</p>

    <p><code class="highlighter-rouge">git pull --rebase origin 1.8</code></p>
  </li>
  <li>
    <p>At this point, you can create a patch file from the upstream branch to
attach to the ACCUMULO-12345 Jira issue. The branch specified here should be the same one you used in step 4.</p>

    <p><code class="highlighter-rouge">git format-patch --stdout origin/1.8 &gt; ACCUMULO-12345.patch</code></p>
  </li>
</ol>

<p>An alternative to creating a patch is submitting a request to pull your changes
from some repository, e.g. GitHub. Please include the repository and branch
name merge in the notice to the Jira issue, e.g.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repo=git://github.com/&lt;username&gt;/accumulo.git branch=ACCUMULO-12345
</code></pre></div></div>

<p>A second alternative is to use Github’s “Pull Requests” feature against the
<a href="https://github.com/apache/accumulo">Apache Accumulo account</a>. Notifications of
new pull-requests from Github should automatically be sent to
<a href="mailto:dev@accumulo.apache.org">dev@accumulo.apache.org</a>.</p>

<p>Ignoring specifics, contributors should be sure to make their changes against
the earlier version in which the fix is intended, <code class="highlighter-rouge">git-rebase</code>‘ing their
changes against the upstream branch so as to keep their changes co-located and
free of unnecessary merges.</p>

<h3 id="developers">Developers</h3>

<h4 id="primary-development">Primary Development</h4>

<p>Primary development should take place in <code class="highlighter-rouge">master</code> which is to contain the most
recent, un-released version of Apache Accumulo. Branches exist for minor releases
for each previously released major version.</p>

<p>Using long-lived branches that track a major release line simplifies management and
release practices. Developers are encouraged to make branches for their own purposes,
for large features, release candidates or whatever else is deemed useful.</p>

<h4 id="reviewing-contributor-changes">Reviewing contributor changes</h4>

<p>It is always the responsibility of committers to determine that a patch is
intended and able to be contributed.  From the
<a href="https://www.apache.org/dev/new-committers-guide#cla">new committer’s guide</a>:
“Please take care to ensure that patches are original works which have been
clearly contributed to the ASF in public. In the case of any doubt (or when a
contribution with a more complex history is presented) please consult your
project PMC before committing it.”</p>

<p>Extra diligence may be necessary when code is contributed via a pull request.
Committers should verify that the contributor intended to submit the code as a 
Contribution under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache License</a>.
When pulling the code, committers should also verify that the commits pulled match the 
list of commits sent to the Accumulo dev list in the pull request.</p>

<h4 id="submit-contribution-via-patch">Submit Contribution via Patch</h4>

<p>Developers should use the following steps to apply patches from
contributors:</p>

<ol>
  <li>
    <p>Checkout the branch for the major version which the patch is intended:</p>

    <p><code class="highlighter-rouge">git checkout 1.8</code></p>
  </li>
  <li>
    <p>Verify the changes introduced by the patch:</p>

    <p><code class="highlighter-rouge">git apply --stat ACCUMULO-12345.patch</code></p>
  </li>
  <li>
    <p>Verify that the patch applies cleanly:</p>

    <p><code class="highlighter-rouge">git apply --check ACCUMULO-12345.patch</code></p>
  </li>
  <li>
    <p>If all is well, apply the patch:</p>

    <p><code class="highlighter-rouge">git am --signoff &lt; ACCUMULO-12345.patch</code></p>
  </li>
  <li>
    <p>When finished, push the changes:</p>

    <p><code class="highlighter-rouge">git push origin 1.8</code></p>
  </li>
  <li>
    <p>Merge where appropriate:</p>

    <p><code class="highlighter-rouge">git checkout master &amp;&amp; git merge 1.8</code></p>
  </li>
</ol>

<h4 id="submit-contribution-via-pull-request">Submit Contribution via Pull-Request</h4>

<p>If the contributor submits a repository and branch to pull
from, the steps are even easier:</p>

<ol>
  <li>
    <p>Add their repository as a remote to your repository</p>

    <p><code class="highlighter-rouge">git remote add some_name ${repository}</code></p>
  </li>
  <li>
    <p>Fetch the refs from the given repository</p>

    <p><code class="highlighter-rouge">git fetch ${repository}</code></p>
  </li>
  <li>
    <p>Merge in the given branch to your local branch</p>

    <p><code class="highlighter-rouge">git merge some_name/${branch}</code></p>
  </li>
  <li>
    <p>Delete the remote:</p>

    <p><code class="highlighter-rouge">git remote remove some_name</code></p>
  </li>
</ol>

<p>If the branch doesn’t fast-forward merge, you likely want to inform the
contributor to update their branch to avoid the conflict resolution and merge
commit. See the <a href="https://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging">Git
manual</a>
for more information on merging. When merging a pull-request, it’s best to <strong>not</strong>
include a signoff on the commit(s) as it changes the final commit ID in the
Accumulo repository. This also has the negative effect of not automatically closing
the Pull-Request when the changes are made public.</p>

<h4 id="feature-branches">Feature Branches</h4>

<p>Ease in creating and using feature branches is a desirable merit which Git
provides with little work. Feature branches are a great way in which developers
to work on multiple, long-running features concurrently, without worry of
mixing code ready for public-review and code needing more internal work.
Additionally, this creates an easily consumable series of commits in which
other developers can track changes, and see how the feature itself evolved.</p>

<p>To prevent developers’ feature branches from colliding with one another, it was
suggested to impose a “hierarchy” in which shared feature branches are prefixed
with <code class="highlighter-rouge">&lt;apache_id&gt;/ACCUMULO-&lt;issue#&gt;[-description]</code>.</p>

<ol>
  <li>
    <p>Create a branch off of <code class="highlighter-rouge">master</code>.</p>

    <p><code class="highlighter-rouge">git checkout &lt;apache_id&gt;/ACCUMULO-&lt;issue#&gt; master</code></p>
  </li>
  <li>
    <p>Create the feature, committing early and often to appropriately outline the
“story” behind the feature and it’s implementation.</p>
  </li>
  <li>
    <p>As long as you have not collaborating with others, <code class="highlighter-rouge">git-rebase</code> your feature
branch against upstream changes in <code class="highlighter-rouge">master</code></p>

    <p><code class="highlighter-rouge">git fetch &amp;&amp; git rebase origin/master</code></p>
  </li>
  <li>
    <p>If you are actively collaborating with others, you should be nice and not
change their history. Use <code class="highlighter-rouge">git-merge</code> instead.</p>

    <p><code class="highlighter-rouge">git fetch &amp;&amp; git merge origin/master</code></p>
  </li>
  <li>
    <p>Continue steps 2 through 4 until the feature is complete.</p>
  </li>
  <li>
    <p>Depending on the nature, duration and history of the changes in your feature
branch, you can choose to:</p>

    <ul>
      <li>
        <p><strong>‘Simple’ Merge</strong>:</p>

        <p><code class="highlighter-rouge">git checkout master &amp;&amp; git merge &lt;apache_id&gt;/ACCUMULO-&lt;issue#&gt;</code></p>
      </li>
      <li>
        <p><strong>Rebase and merge</strong> – keeps all feature-branch commits
co-located:</p>

        <p><code class="highlighter-rouge">git fetch &amp;&amp; git rebase origin/master &amp;&amp; git checkout master &amp;&amp; git merge &lt;apache_id&gt;/ACCUMULO-&lt;issue#&gt;</code></p>
      </li>
      <li>
        <p><strong>Merge with squash</strong> – feature branch history is a mess, just make one commit
with the lump-sum of your feature branch changes:</p>

        <p><code class="highlighter-rouge">git checkout master &amp;&amp; git merge --squash &lt;apache_id&gt;/ACCUMULO-&lt;issue#&gt;</code></p>
      </li>
    </ul>
  </li>
</ol>

<h4 id="changes-which-affect-multiple-versions-aka-merging">Changes which affect multiple versions (a.k.a. merging)</h4>

<p>Merging can be a very confusing topic for users switching to Git, but it can be
summarized fairly easily.</p>

<ol>
  <li>
    <p><strong>Precondition</strong>: choose the right branch to start! (lowest, applicable version
for the change)</p>
  </li>
  <li>
    <p>Get your changes fixed for that earliest version.</p>
  </li>
  <li>
    <p>Switch to the next highest version which future minor versions will be
released (non-EOL major release series).</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git-merge</code> the branch from #1 into the current.</p>
  </li>
  <li>
    <p>In the face of conflicts, use options from <code class="highlighter-rouge">git-merge</code> to help you.</p>

    <ul>
      <li><code class="highlighter-rouge">git checkout new-version &amp;&amp; git merge --stat old-version</code></li>
      <li><code class="highlighter-rouge">git checkout new-version &amp;&amp; git merge --no-commit old-version</code></li>
    </ul>
  </li>
  <li>
    <p>Treat your current branch as the branch from #2, and repeat from #2.</p>
  </li>
</ol>

<p>When merging changes across major releases, there is always the possibility of
changes which are applicable/necessary in one release, but not in any future
releases, changes which are different in implementation due to API changes, or
any number of other cases. Whatever the actual case is, the developer who made
the first set of changes (you) is the one responsible for performing the merge
through the rest of the active versions. Even when the merge may results in a
zero-length change in content, this is incredibly important to record, as you
are the one who knows that this zero-length change in content is correct!</p>

<h2 id="code-review-process">Code review process</h2>

<p>Accumulo primarily uses GitHub (via pull requests) for code reviews, but has access to an instance of <a href="https://reviews.apache.org/">Review Board</a> as well if that is preferred.</p>

<p>Accumulo operates under the <a href="https://www.apache.org/foundation/glossary#CommitThenReview">Commit-Then-Review</a> (CtR) policy, so a code review does not need to occur prior to commit. However, a commiter has the option to hold a code review before a commit happens if, in their opinion, it would benefit from additional attention. Full details of the code review process for Accumulo is documented <a href="./rb">here</a></p>

<h3 id="review-board">Review Board</h3>

<p>Use of <a href="/contributor/rb">Review Board</a> has slowly diminished and been gradually replaced by GitHub reviews over the past year or so.</p>

<h2 id="additional-contributor-information">Additional Contributor Information</h2>

<h3 id="coding-practices">Coding Practices</h3>

<table class="table">
  <tbody>
    <tr>
      <td><strong>License Header</strong></td>
      <td>Always add the current ASF license header as described in [ASF Source Header][srcheaders].</td>
    </tr>
    <tr>
      <td><strong>Trailing Whitespaces</strong></td>
      <td>Remove all trailing whitespaces. Eclipse users can use Source→Cleanup option to accomplish this.</td>
    </tr>
    <tr>
      <td><strong>Indentation</strong></td>
      <td>Use 2 space indents and never use tabs!</td>
    </tr>
    <tr>
      <td><strong>Line Wrapping</strong></td>
      <td>Use 160-column line width for Java code and Javadoc.</td>
    </tr>
    <tr>
      <td><strong>Control Structure New Lines</strong></td>
      <td>Use a new line with single statement if/else blocks.</td>
    </tr>
    <tr>
      <td><strong>Author Tags</strong></td>
      <td>Do not use Author Tags. The code is developed and owned by the community.</td>
    </tr>
  </tbody>
</table>

<h3 id="merging-practices">Merging Practices</h3>

<p>Changes should be merged from earlier branches of Accumulo to later branches. Ask the <a href="mailto:dev@accumulo.apache.org">dev list</a> for instructions.</p>

<h3 id="project-examples">Project Examples</h3>

<p>A collection of Accumulo example code can be found at the <a href="https://github.com/apache/accumulo-examples">Accumulo Examples repository</a>.</p>

<h3 id="website-contributions">Website Contributions</h3>

<p>The source for this website is a collection of markdown documents that are converted to HTML using
<a href="https://jekyllrb.com">Jekyll</a>. It can be found in the <a href="https://github.com/apache/accumulo-website">accumulo-website repo</a>. If you would like to make changes to this website, clone the website repo and edit the markdown:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    git clone https://github.com/apache/accumulo-website.git
</code></pre></div></div>

<p>After you have made your changes, follow the instructions in the <a href="https://github.com/apache/accumulo-website/blob/master/README.md">README.md</a> to run the website locally and make a pull request on <a href="https://github.com/apache/accumulo-website">GitHub</a>. If you have problems installing Jekyll or running the website locally, it’s OK to proceed with the pull request. A committer will review your changes before committing them and updating the website.</p>

<h3 id="public-api">Public API</h3>

<p>Refer to the README in the release you are using to see what packages are in the public API.</p>

<p>Changes to non-private members of those classes are subject to additional scrutiny to minimize compatibility problems across Accumulo versions.</p>

<h3 id="installing-apache-thrift-1">Installing Apache Thrift</h3>

<p>If you activate the ‘thrift’ Maven profile, the build of some modules will attempt to run the Apache Thrift command line to regenerate stubs. If you activate this profile and don’t have Apache Thrift installed and in your path, you will see a warning and your build will fail. For Accumulo 1.5.0 and greater, install Thrift 0.9 and make sure that the ‘thrift’ command is in your path. Watch out for THRIFT-1367; you may need to configure Thrift with –without-ruby. Most developers do not need to install or modify the Thrift definitions as a part of developing against Apache Accumulo.</p>

<h2 id="committer-documentation">Committer Documentation</h2>

<p>The links below are provided primarily for the project committers but may be of interest to contributors as well.</p>

<ul>
  <li><a href="/contributor/release-management">Release Management</a></li>
  <li><a href="/contributor/making-release">Making a Release</a></li>
  <li><a href="https://accumulo.apache.org/contributor/verifying-release">Verifying a Release</a></li>
</ul>

<h2 id="project-governance">Project Governance</h2>

<p>For details about governance policies for the Accumulo project view the following links.</p>

<ul>
  <li><a href="/contributor/bylaws">Bylaws</a></li>
  <li><a href="/contributor/consensusBuilding">Consensus Building</a></li>
  <li><a href="/contributor/lazyConsensus">Lazy Consensus</a></li>
  <li><a href="/contributor/voting">Voting</a></li>
</ul>


        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2017 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
