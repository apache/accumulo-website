<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/bootstrap-theme.min.css" rel="stylesheet">
<link href="/css/dataTables.bootstrap.css" rel="stylesheet">
<link href="/css/accumulo.css" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

<title>Apache Accumulo 1.6.1 Release Notes</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.dataTables.min.js"></script>
<script src="/js/dataTables.bootstrap.js"></script>
<script>
  // show location of canonical site if not currently on the canonical site
  $(function() {
    var host = window.location.host;
    if (typeof host !== 'undefined' && host !== 'accumulo.apache.org') {
      $('#non-canonical').show();
    }
  });

  
  // decorate menu with currently navigated page
  $(function() {
    $("#nav_rn_161").addClass("active");
  });
  

  $(function() {
    // decorate section headers with anchors
    return $("h2, h3, h4, h5, h6").each(function(i, el) {
      var $el, icon, id;
      $el = $(el);
      id = $el.attr('id');
      icon = '<i class="fa fa-link"></i>';
      if (id) {
        return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
      }
    });
  });

  // configure Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  if (ga.hasOwnProperty('loaded') && ga.loaded === true) {
    ga('create', 'UA-50934829-1', 'apache.org');
    ga('send', 'pageview');
  }
</script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/"><img id="nav-logo" alt="Apache Accumulo" class="img-responsive" src="/images/accumulo-logo.png" width="200"/></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="nav navbar-nav">
        <li class="nav-link"><a href="/downloads">Download</a></li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Documentation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li class="dropdown-header">1.8.0 Release (Latest)</li>
          <li id="nav_rn_180"><a href="/release_notes/1.8.0">Release Notes</a></li>
          <li><a href="/1.8/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.8/apidocs">Javadoc</a></li>
          <li id="nav_examples_18"><a href="/1.8/examples">Examples</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">1.7.2 Release</li>
          <li id="nav_rn_172"><a href="/release_notes/1.7.2">Release Notes</a></li>
          <li><a href="/1.7/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.7/apidocs">Javadoc</a></li>
          <li id="nav_examples_17"><a href="/1.7/examples">Examples</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">1.6.6 Release</li>
          <li id="nav_rn_166"><a href="/release_notes/1.6.6">Release Notes</a></li>
          <li><a href="/1.6/accumulo_user_manual">User Manual</a></li>
          <li><a href="/1.6/apidocs">Javadoc</a></li>
          <li id="nav_examples_16"><a href="/1.6/examples">Examples</a></li>
          <li class="divider"></li>
          <li id="nav_features"><a href="/notable_features">Features</a></li>
          <li id="nav_rn"><a href="/release_notes">Release Notes Archive</a></li>
          <li id="old_documentation"><a href="/old_documentation">Documentation Archive</a></li>
          <li id="nav_screenshots"><a href="/screenshots">Screenshots</a></li>
          <li id="nav_papers"><a href="/papers">Papers &amp; Presentations</a></li>
          <li id="nav_glossary"><a href="/glossary">Glossary</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li id="nav_getinvolved"><a href="/get_involved">Get Involved</a></li>
          <li id="nav_mailinglists"><a href="/mailing_list">Mailing Lists</a></li>
          <li id="nav_people"><a href="/people">People</a></li>
          <li id="nav_blog"><a href="https://blogs.apache.org/accumulo">Blog <i class="fa fa-external-link"></i></a></li>
          <li id="nav_projects"><a href="/projects">Community Projects</a></li>
          <li id="nav_thanks"><a href="/thanks">Thanks</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Governance</li>
          <li id="nav_bylaws"><a href="/bylaws">Bylaws</a></li>
          <li id="nav_consensusbuilding"><a href="/governance/consensusBuilding">Consensus Building</a></li>
          <li id="nav_lazyconsensus"><a href="/governance/lazyConsensus">Lazy Consensus</a></li>
          <li id="nav_govreleasing"><a href="/governance/releasing">Releasing</a></li>
          <li id="nav_voting"><a href="/governance/voting">Voting</a></li>
        </ul>
        </li>
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Development<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://issues.apache.org/jira/browse/ACCUMULO">Issue Tracker <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://github.com/apache/accumulo/pulls">Pull Requests <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://builds.apache.org/view/A/view/Accumulo">Jenkins Builds <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://travis-ci.org/apache/accumulo">TravisCI Builds <i class="fa fa-external-link"></i></a></li>
          <li class="divider"></li>
          <li class="dropdown-header">Guides</li>
          <li id="nav_source"><a href="/source">Source &amp; Guide</a></li>
          <li id="nav_git"><a href="/git">Git Workflow</a></li>
          <li id="nav_versioning"><a href="/versioning">Versioning</a></li>
          <li id="nav_contrib"><a href="/contrib">Contrib Projects</a></li>
          <li id="nav_rb"><a href="/rb">Review Board</a></li>
          <li id="nav_releasing"><a href="/releasing">Making Releases</a></li>
          <li id="nav_verify_release"><a href="/verifying_releases">Verifying Releases</a></li>
        </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Apache Software Foundation<span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="https://www.apache.org">Apache Homepage <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/licenses/LICENSE-2.0">License <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/security">Security <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/thanks">Thanks <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <i class="fa fa-external-link"></i></a></li>
        </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Apache Accumulo 1.6.1 Release Notes</h1>
          
          <p>Apache Accumulo 1.6.1 is a maintenance release on the 1.6 version branch.
This release contains changes from over 175 issues, comprised of bug-fixes, performance
improvements and better test cases. As this is a maintenance release, Apache Accumulo
1.6.1 has no client API  incompatibilities over Apache Accumulo 1.6.0. Users of 1.6.0
are strongly encouraged to update as soon as possible to benefit from the improvements.</p>

<p>New users are encouraged to use this release over 1.6.0 or any other older releases. For
information about improvements since Accumulo 1.5, see the <a href="/release_notes/1.6.0">1.6.0 release notes</a>.</p>

<h2 id="performance-improvements">Performance Improvements</h2>

<p>Apache Accumulo 1.6.1 includes a number of performance-related fixes over previous versions.
Many of these improvements were also included in the recently released Apache Accumulo 1.5.2.</p>

<h3 id="write-ahead-log-sync-performance">Write-Ahead Log sync performance</h3>

<p>The Write-Ahead Log (WAL) files are used to ensure durability of updates made to Accumulo.
A sync is called on the file in HDFS to make sure that the changes to the WAL are persisted
to disk, which allows Accumulo to recover in the case of failure. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2766">ACCUMULO-2766</a> fixed
an issue where an operation against a WAL would unnecessarily wait for multiple syncs, slowing
down the ingest on the system.</p>

<h3 id="minor-compactions-not-aggressive-enough">Minor-Compactions not aggressive enough</h3>

<p>On a system with ample memory provided to Accumulo, long hold-times were observed which
blocks the ingest of new updates. Trying to free more server-side memory by running minor
compactions more frequently increased the overall throughput on the node. These changes
were made in <a href="https://issues.apache.org/jira/browse/ACCUMULO-2905">ACCUMULO-2905</a>.</p>

<h3 id="heapiterator-optimization">HeapIterator optimization</h3>

<p>Iterators, a notable feature of Accumulo, are provided to users as a server-side programming
construct, but are also used internally for numerous server operations. One of these system iterator 
is the HeapIterator which implements a PriorityQueue of other Iterators. One way this iterator is
used is to merge multiple files in HDFS to present a single, sorted stream of Key-Value pairs. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2827">ACCUMULO-2827</a>
introduces a performance optimization to the HeapIterator which can improve the speed of the
HeapIterator in common cases.</p>

<h3 id="write-ahead-log-sync-implementation">Write-Ahead log sync implementation</h3>

<p>In Hadoop-2, two implementations of sync are provided: hflush and hsync. Both of these
methods provide a way to request that the datanodes write the data to the underlying
medium and not just hold it in memory (the <em>fsync</em> syscall). While both of these methods
inform the Datanodes to sync the relevant block(s), <em>hflush</em> does not wait for acknowledgement
from the Datanodes that the sync finished, where <em>hsync</em> does. To provide the most reliable system
“out of the box”, Accumulo defaults to <em>hsync</em> so that your data is as secure as possible in 
a variety of situations (notably, unexpected power outages).</p>

<p>The downside is that performance tends to suffer because waiting for a sync to disk is a very
expensive operation. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2842">ACCUMULO-2842</a> introduces a new system property, tserver.wal.sync.method,
that lets users to change the HDFS sync implementation from <em>hsync</em> to <em>hflush</em>. Using <em>hflush</em> instead
of <em>hsync</em> may result in about a 30% increase in ingest performance.</p>

<p>For users upgrading from Hadoop-1 or Hadoop-0.20 releases, <em>hflush</em> is the equivalent of how
sync was implemented in these older versions of Hadoop and should give comparable performance.</p>

<h2 id="other-improvements">Other improvements</h2>

<h3 id="use-of-hadoop-credentialproviders">Use of Hadoop CredentialProviders</h3>

<p>Apache Hadoop 2.6.0 introduced a new API aimed at providing ways to separate sensitive values
from being stored in plaintext as a part of <a href="https://issues.apache.org/jira/browse/HADOOP-10607">HADOOP-10607</a>. Accumulo has had two sensitive
configuration properties stored in <em>accumulo-site.xml</em> for every standard installation: instance.secret
and trace.token.property.password. If either of these properties are compromised, it could lead to
unwanted access of Accumulo. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2464">ACCUMULO-2464</a> modifies Accumulo so that it can stored any sensitive
configuration properties in a Hadoop CredentialProvider. With sensitive values removed from accumulo-site.xml,
it can be shared without concern and security can be focused solely on the CredentialProvider.</p>

<h2 id="notable-bug-fixes">Notable Bug Fixes</h2>

<h3 id="add-configurable-maximum-frame-size-to-apache-thrift-proxy">Add configurable maximum frame size to Apache Thrift proxy</h3>

<p>The Thrift proxy server was subject to memory exhaustion, typically
due to bad input, where the server would attempt to allocate a very large
buffer and die in the process. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2658">ACCUMULO-2658</a> introduces a configuration
parameter, like <a href="https://issues.apache.org/jira/browse/ACCUMULO-2360">ACCUMULO-2360</a>, to prevent this error.</p>

<h3 id="offline-tables-can-prevent-tablet-balancing">Offline tables can prevent tablet balancing</h3>

<p>Before 1.6.1, when a table with many tablets was created, ingested into, and
taken offline, tablet balancing may have stoppped. This would happen if there
were tablet migrations for the table, because the migrations couldn’t occur.
The balancer will not run when there are outstanding migrations; therefore, a
system could become unbalanced. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2694">ACCUMULO-2694</a> introduces a fix to ensure
that offline tables do not block balancing and improves the server-side
logging.</p>

<h3 id="miniaccumulocluster-process-management">MiniAccumuloCluster process management</h3>

<p>MiniAccumuloCluster had a few issues which could cause deadlock or a method that
never returns. Most of these are related to management of the Accumulo processes
(<a href="https://issues.apache.org/jira/browse/ACCUMULO-2764">ACCUMULO-2764</a>, <a href="https://issues.apache.org/jira/browse/ACCUMULO-2985">ACCUMULO-2985</a>, and <a href="https://issues.apache.org/jira/browse/ACCUMULO-3055">ACCUMULO-3055</a>).</p>

<h3 id="iteratorsettings-not-correctly-serialized-in-rangeinputsplit">IteratorSettings not correctly serialized in RangeInputSplit</h3>

<p>The Writable interface methods on the RangeInputSplit class accidentally omitted
calls to serialize the IteratorSettings configured for the Job. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2962">ACCUMULO-2962</a>
fixes the serialization and adds some additional tests.</p>

<h3 id="constraint-violation-causes-hung-scans">Constraint violation causes hung scans</h3>

<p>A failed bulk import transaction had the ability to create an infinitely retrying
loop due to a constraint violation. This directly prevents scans from completing,
but will also hang compactions. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3096">ACCUMULO-3096</a> fixes the issue so that the
constraint no longer hangs the entire system.</p>

<h3 id="unable-to-upgrade-cleanly-from-15">Unable to upgrade cleanly from 1.5</h3>

<p>When upgrading a table from 1.5.1 to 1.6.0, a user experienced an error where the table
never came online. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2974">ACCUMULO-2974</a> fixes an issue from the change of file references
stored as absolute paths instead of relative paths in the Accumulo metadata table.</p>

<h3 id="guava-dependency-changed">Guava dependency changed</h3>

<p><a href="https://issues.apache.org/jira/browse/ACCUMULO-3100">ACCUMULO-3100</a> lowered the dependency on Guava from 15.0 to 14.0.1. This dependency
now matches what Hadoop is depending on for the 2.x.y version line. Depending on a newer
version of Guava introduces many issues stemming from deprecated classes in use by Hadoop
which have been removed. While installations of Accumulo will likely work as expected with
newer versions of Guava on the classpath (because the Hadoop processes will have their own
classpath), use of MiniDfsClusters with the new Guava version will result in errors.</p>

<p>Users can attempt to use a newer version of Guava on the Accumulo server classpath; however,
the success is dependent on Hadoop client libraries not using (missing) Guava methods internally.</p>

<h3 id="scanners-eat-interruptedexception">Scanners eat InterruptedException</h3>

<p>Scanners previously consumed InterruptedExceptions and did not exit after. In multi-threaded
environments, this is very problematic as there is no means to stop the Scanner from reading data.
<a href="https://issues.apache.org/jira/browse/ACCUMULO-3030">ACCUMULO-3030</a> fixes the Scanner so that interrupts are observed and the Scanner exits as expected.</p>

<h2 id="documentation">Documentation</h2>

<p>The following documentation updates were made:</p>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2767">ACCUMULO-2767</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2796">ACCUMULO-2796</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2919">ACCUMULO-2919</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-3008">ACCUMULO-3008</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2874">ACCUMULO-2874</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2821">ACCUMULO-2821</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-3097">ACCUMULO-3097</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-3097">ACCUMULO-3097</a></li>
</ul>

<h2 id="testing">Testing</h2>

<p>Each unit and functional test only runs on a single node, while the RandomWalk and Continuous Ingest tests run 
on any number of nodes. <em>Agitation</em> refers to randomly restarting Accumulo processes and Hadoop Datanode processes,
and, in HDFS High-Availability instances, forcing NameNode failover.</p>

<table id="release_notes_testing" class="table">
  <thead>
    <tr>
      <th>OS</th>
      <th>Hadoop</th>
      <th>Nodes</th>
      <th>ZooKeeper</th>
      <th>HDFS HA</th>
      <th>Tests</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Gentoo</td>
      <td>Apache 2.6.0-SNAPSHOT</td>
      <td>2</td>
      <td>Apache 3.4.5</td>
      <td>No</td>
      <td>Unit and Functional Tests, ContinuousIngest w/ verification (2B entries)</td>
    </tr>
    <tr>
      <td>CentOS 6</td>
      <td>Apache 2.3.0</td>
      <td>20</td>
      <td>Apache 3.4.5</td>
      <td>No</td>
      <td>24/hr RandomWalk, ContinuousIngest w/ verification w/ and w/o agitation (17B entries), 24hr Randomwalk test</td>
    </tr>
  </tbody>
</table>


        </div>

        
<footer>

  <p><a href="https://www.apache.org"><img src="/images/feather-small.gif" alt="Apache Software Foundation" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2016 The Apache Software Foundation. Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>

  <p>Site created with <a href="https://getbootstrap.com">Bootstrap</a> including icons from
<a href="https://glyphicons.com">GLYPHICONS</a> and <a href="http://fontawesome.io">Font Awesome</a>.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
