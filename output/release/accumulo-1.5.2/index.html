<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="/css/bootstrap/5.3.3/dist/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/css/fontawesome/fontawesome-free-6.4.2-web/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/css/datatables/bs5/dt-1.13.6/datatables.min.css">
<link rel="stylesheet" type="text/css" href="/css/accumulo.css">

<title>Apache Accumulo 1.5.2</title>

<script type="text/javascript" src="/js/jquery/3.7.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap/5.3.3/dist/js/bootstrap.bundle.js"></script>
<script type="text/javascript" src="/js/datatables/bs5/dt-1.13.6/datatables.min.js"></script>
<script type="text/javascript" src="https://www.apachecon.com/event-images/snippet.js"></script>
<script type="text/javascript" src="/js/accumulo.js"></script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img alt="Apache Accumulo" id="nav-logo" src="/images/accumulo-logo.png" width="200">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-items">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
        <li class="nav-item"><a class="nav-link" href="/tour">Tour</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Releases</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/release/accumulo-3.0.0/">3.0.0 (Latest non-LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-2.1.2/">2.1.2 (Latest LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-1.10.4/">1.10.4 (Legacy LTM)</a></li>
            <li><a class="dropdown-item" href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Documentation</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/docs/2.x">User Manual (2.x)</a></li>
            <li><a class="dropdown-item" href="/docs/2.x/apidocs">Javadocs (2.x)</a></li>
            <li><a class="dropdown-item" href="/api">Public API</a></li>
            <li><a class="dropdown-item" href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a class="dropdown-item" href="/accumulo2-maven-plugin">Accumulo Maven Plugin</a></li>
            <li><a class="dropdown-item" href="/1.10/accumulo_user_manual.html">User Manual (1.10)</a></li>
            <li><a class="dropdown-item" href="/1.10/apidocs">Javadocs (1.10)</a></li>
            <li><a class="dropdown-item" href="/external-docs">External Docs</a></li>
            <li><a class="dropdown-item" href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Community</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/contact-us">Contact Us</a></li>
            <li><a class="dropdown-item" href="/how-to-contribute">How To Contribute</a></li>
            <li><a class="dropdown-item" href="/people">People</a></li>
            <li><a class="dropdown-item" href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="/search">Search</a></li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <img alt="Apache Software Foundation" src="https://www.apache.org/foundation/press/kit/feather.svg" width="15"/>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="https://www.apache.org">Apache Homepage <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship">Sponsorship <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/security">Security <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks">Thanks <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/privacy.html">Privacy Policy<span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/events/current-event.html">Current Event <span class="fa-solid fa-up-right-from-square"></span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Apache Accumulo 1.5.2</h1>
          
          

<p>19 Sep 2014</p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.5.1/">&laquo;&nbsp;Apache Accumulo 1.5.1</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.5.3/">Apache Accumulo 1.5.3&nbsp;&raquo;</a></li>
      
    </ul></nav>




<div class="alert alert-warning" role="alert">
  This version of Accumulo has been superceded by a newer version.<br>
  Please check <a class="alert-link" href="/release/">our release archive</a> for a newer version.
</div>


<p>Apache Accumulo 1.5.2 is a maintenance release on the 1.5 version branch.
This release contains changes from over 100 issues, comprised of bug fixes
(client side and server side), new test cases, and updated Hadoop support
contributed by over 30 different contributors and committers.</p>

<p>Below are resources for this release:</p>

<ul>
  <li><a href="/1.5/accumulo_user_manual.html">User Manual</a></li>
  <li><a href="/1.5/apidocs">Javadocs</a></li>
  <li><a href="/1.5/examples">Examples</a></li>
</ul>

<p>As this is a maintenance release, Apache Accumulo 1.5.2 has no client API
incompatibilities over Apache Accumulo 1.5.0 and 1.5.1 and requires no manual upgrade
process. Users of 1.5.0 or 1.5.1 are strongly encouraged to update as soon as possible
to benefit from the improvements.</p>

<p>Users who are new to Accumulo are encouraged to use a 1.6 release as opposed
to the 1.5 line as development has already shifted towards the 1.6 line. For those
who cannot or do not want to upgrade to 1.6, 1.5.2 is still an excellent choice
over earlier versions in the 1.5 line.</p>

<h2 id="performance-improvements">Performance Improvements</h2>

<p>Apache Accumulo 1.5.2 includes a number of performance-related fixes over previous versions.</p>

<h3 id="write-ahead-log-sync-performance">Write-Ahead Log sync performance</h3>

<p>The Write-Ahead Log (WAL) files are used to ensure durability of updates made to Accumulo.
A sync is called on the file in HDFS to make sure that the changes to the WAL are persisted
to disk, which allows Accumulo to recover in the case of failure. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2766">ACCUMULO-2766</a> fixed
an issue where an operation against a WAL would unnecessarily wait for multiple syncs, slowing
down the ingest on the system.</p>

<h3 id="minor-compactions-not-aggressive-enough">Minor-Compactions not aggressive enough</h3>

<p>On a system with ample memory provided to Accumulo, long hold-times were observed which
blocks the ingest of new updates. Trying to free more server-side memory by running minor
compactions more frequently increased the overall throughput on the node. These changes
were made in <a href="https://issues.apache.org/jira/browse/ACCUMULO-2905">ACCUMULO-2905</a>.</p>

<h3 id="heapiterator-optimization">HeapIterator optimization</h3>

<p>Iterators, a notable feature of Accumulo, are provided to users as a server-side programming
construct, but are also used internally for numerous server operations. One of these system iterator
is the HeapIterator which implements a PriorityQueue of other Iterators. One way this iterator is
used is to merge multiple files in HDFS to present a single, sorted stream of Key-Value pairs. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2827">ACCUMULO-2827</a>
introduces a performance optimization to the HeapIterator which can improve the speed of the
HeapIterator in common cases.</p>

<h3 id="write-ahead-log-sync-implementation">Write-Ahead log sync implementation</h3>

<p>In Hadoop-2, two implementations of sync are provided: hflush and hsync. Both of these
methods provide a way to request that the datanodes write the data to the underlying
medium and not just hold it in memory (the <em>fsync</em> syscall). While both of these methods
inform the Datanodes to sync the relevant block(s), <em>hflush</em> does not wait for acknowledgement
from the Datanodes that the sync finished, where <em>hsync</em> does. To provide the most reliable system
“out of the box”, Accumulo defaults to <em>hsync</em> so that your data is as secure as possible in
a variety of situations (notably, unexpected power outages).</p>

<p>The downside is that performance tends to suffer because waiting for a sync to disk is a very
expensive operation. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2842">ACCUMULO-2842</a> introduces a new system property, tserver.wal.sync.method,
that lets users to change the HDFS sync implementation from <em>hsync</em> to <em>hflush</em>. Using <em>hflush</em> instead
of <em>hsync</em> may result in about a 30% increase in ingest performance.</p>

<p>For users upgrading from Hadoop-1 or Hadoop-0.20 releases, <em>hflush</em> is the equivalent of how
sync was implemented in these older versions of Hadoop and should give comparable performance.</p>

<h3 id="server-side-mutation-queue-size">Server-side mutation queue size</h3>

<p>When users desire writes to be as durable as possible, using <em>hsync</em>, the ingest performance
of the system can be improved by increasing the tserver.mutation.queue.max property. The cost
of this change is that it will cause TabletServers to use additional memory per writer. In 1.5.1,
the value of this parameter defaulted to a conservative 256K, which resulted in sub-par ingest
performance.</p>

<p>1.5.2 and <a href="https://issues.apache.org/jira/browse/ACCUMULO-3018">ACCUMULO-3018</a> increases this buffer to 1M which has a noticeable positive impact on
ingest performance with a minimal increase in TabletServer memory usage.</p>

<h2 id="notable-bug-fixes">Notable Bug Fixes</h2>

<h3 id="fixes-mapreduce-package-name-change">Fixes MapReduce package name change</h3>

<p>1.5.1 inadvertently included a change to RangeInputSplit which created an incompatibility
with 1.5.0. The original class has been restored to ensure that users accessing
the RangeInputSplit class do not have to alter their client code. See <a href="https://issues.apache.org/jira/browse/ACCUMULO-2586">ACCUMULO-2586</a> for
more information</p>

<h3 id="add-configurable-maximum-frame-size-to-apache-thrift-proxy">Add configurable maximum frame size to Apache Thrift proxy</h3>

<p>The Thrift proxy server was subject to memory exhaustion, typically
due to bad input, where the server would attempt to allocate a very large
buffer and die in the process. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2658">ACCUMULO-2658</a> introduces a configuration
parameter, like <a href="https://issues.apache.org/jira/browse/ACCUMULO-2360">ACCUMULO-2360</a>, to prevent this error.</p>

<h3 id="offline-tables-can-prevent-tablet-balancing">Offline tables can prevent tablet balancing</h3>

<p>Before 1.5.2, when a table with many tablets was created, ingested into, and
taken offline, tablet balancing may have stopped. This would happen if there
were tablet migrations for the table, because the migrations couldn’t occur.
The balancer will not run when there are outstanding migrations; therefore, a
system could become unbalanced. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2694">ACCUMULO-2694</a> introduces a fix to ensure
that offline tables do not block balancing and improves the server-side
logging.</p>

<h3 id="miniaccumulocluster-process-management">MiniAccumuloCluster process management</h3>

<p>MiniAccumuloCluster had a few issues which could cause deadlock or a method that
never returns. Most of these are related to management of the Accumulo processes
(<a href="https://issues.apache.org/jira/browse/ACCUMULO-2764">ACCUMULO-2764</a>, <a href="https://issues.apache.org/jira/browse/ACCUMULO-2985">ACCUMULO-2985</a>, and <a href="https://issues.apache.org/jira/browse/ACCUMULO-3055">ACCUMULO-3055</a>).</p>

<h3 id="iteratorsettings-not-correctly-serialized-in-rangeinputsplit">IteratorSettings not correctly serialized in RangeInputSplit</h3>

<p>The Writable interface methods on the RangeInputSplit class accidentally omitted
calls to serialize the IteratorSettings configured for the Job. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2962">ACCUMULO-2962</a>
fixes the serialization and adds some additional tests.</p>

<h3 id="constraint-violation-causes-hung-scans">Constraint violation causes hung scans</h3>

<p>A failed bulk import transaction had the ability to create an infinitely retrying
loop due to a constraint violation. This directly prevents scans from completing,
but will also hang compactions. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3096">ACCUMULO-3096</a> fixes the issue so that the
constraint no longer hangs the entire system.</p>

<h2 id="documentation">Documentation</h2>

<p>The following documentation updates were made:</p>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2540">ACCUMULO-2540</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2767">ACCUMULO-2767</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2796">ACCUMULO-2796</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2443">ACCUMULO-2443</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-3008">ACCUMULO-3008</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2919">ACCUMULO-2919</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2874">ACCUMULO-2874</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2653">ACCUMULO-2653</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2437">ACCUMULO-2437</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-3097">ACCUMULO-3097</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-2499">ACCUMULO-2499</a></li>
  <li><a href="https://issues.apache.org/jira/browse/ACCUMULO-1669">ACCUMULO-1669</a></li>
</ul>

<h2 id="testing">Testing</h2>

<p>Each unit and functional test only runs on a single node, while the RandomWalk and Continuous Ingest tests run
on any number of nodes. <em>Agitation</em> refers to randomly restarting Accumulo processes and Hadoop Datanode processes,
and, in HDFS High-Availability instances, forcing NameNode failover.</p>

<table id="release_notes_testing" class="table">
  <thead>
    <tr>
      <th>OS</th>
      <th>Hadoop</th>
      <th>Nodes</th>
      <th>ZooKeeper</th>
      <th>HDFS High-Availability</th>
      <th>Tests</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Gentoo</td>
      <td>Apache 2.6.0-SNAPSHOT</td>
      <td>1</td>
      <td>Apache 3.4.5</td>
      <td>No</td>
      <td>Unit and Functional Tests, ContinuousIngest w/ verification (1B entries)</td>
    </tr>
    <tr>
      <td>CentOS 6</td>
      <td>Apache 2.3.0</td>
      <td>20</td>
      <td>Apache 3.4.5</td>
      <td>No</td>
      <td>24/hr RandomWalk, 24/hr ContinuousIngest w/ verification w/ and w/o agitation (30B and 23B entries)</td>
    </tr>
  </tbody>
</table>



<hr>

<p><strong>View all releases in the <a href="/release/">archive</a></strong></p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.5.1/">&laquo;&nbsp;Apache Accumulo 1.5.1</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.5.3/">Apache Accumulo 1.5.3&nbsp;&raquo;</a></li>
      
    </ul></nav>

        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.
Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.</p>

  <p>Apache®, the names of Apache projects and their logos, and the multicolor feather
logo are registered trademarks or trademarks of The Apache Software Foundation
in the United States and/or other countries.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
