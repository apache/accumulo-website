<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="/css/bootstrap/5.3.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/css/fontawesome/fontawesome/fontawesome-free-6.4.2-web/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/css/datatables/bs5/dt-1.13.6/datatables.min.css">
<link rel="stylesheet" type="text/css" href="/css/accumulo.css">

<title>Apache Accumulo 1.6.2</title>

<script type="text/javascript" src="/js/jquery/3.7.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap/5.3.1/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="/js/datatables/bs5/dt-1.13.6/datatables.min.js"></script>
<script type="text/javascript" src="https://www.apachecon.com/event-images/snippet.js"></script>
<script type="text/javascript" src="/js/accumulo.js"></script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img alt="Apache Accumulo" id="nav-logo" src="/images/accumulo-logo.png" width="200">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-items">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
        <li class="nav-item"><a class="nav-link" href="/tour">Tour</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Releases</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/release/accumulo-3.0.0/">3.0.0 (Latest non-LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-2.1.2/">2.1.2 (Latest LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-1.10.4/">1.10.4 (Legacy LTM)</a></li>
            <li><a class="dropdown-item" href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Documentation</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/docs/2.x">User Manual (2.x)</a></li>
            <li><a class="dropdown-item" href="/docs/2.x/apidocs">Javadocs (2.x)</a></li>
            <li><a class="dropdown-item" href="/api">Public API</a></li>
            <li><a class="dropdown-item" href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a class="dropdown-item" href="/accumulo2-maven-plugin">Accumulo Maven Plugin</a></li>
            <li><a class="dropdown-item" href="/1.10/accumulo_user_manual.html">User Manual (1.10)</a></li>
            <li><a class="dropdown-item" href="/1.10/apidocs">Javadocs (1.10)</a></li>
            <li><a class="dropdown-item" href="/external-docs">External Docs</a></li>
            <li><a class="dropdown-item" href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Community</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/contact-us">Contact Us</a></li>
            <li><a class="dropdown-item" href="/how-to-contribute">How To Contribute</a></li>
            <li><a class="dropdown-item" href="/people">People</a></li>
            <li><a class="dropdown-item" href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="/search">Search</a></li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <img alt="Apache Software Foundation" src="https://www.apache.org/foundation/press/kit/feather.svg" width="15"/>
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="https://www.apache.org">Apache Homepage <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship">Sponsorship <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/security">Security <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks">Thanks <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/privacy.html">Privacy Policy<span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/events/current-event.html">Current Event <span class="fa-solid fa-up-right-from-square"></span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Apache Accumulo 1.6.2</h1>
          
          

<p>16 Feb 2015</p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.6.1/">&laquo;&nbsp;Apache Accumulo 1.6.1</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.6.3/">Apache Accumulo 1.6.3&nbsp;&raquo;</a></li>
      
    </ul></nav>




<div class="alert alert-warning" role="alert">
  This version of Accumulo has been superceded by a newer version.<br>
  Please check <a class="alert-link" href="/release/">our release archive</a> for a newer version.
</div>


<p>Apache Accumulo 1.6.2 is a maintenance release on the 1.6 version branch.
This release contains changes from over 150 issues, comprised of bug-fixes, performance
improvements and better test cases. Apache Accumulo 1.6.2 is the first release since the
community has adopted <a href="https://semver.org">Semantic Versioning</a> which means that all changes to the <a href="https://github.com/apache/accumulo#api">public API</a>
are guaranteed to be made without adding to or removing from the public API. This ensures
that client code that runs against 1.6.1 is guaranteed to run against 1.6.2 and vice versa.</p>

<p>Below are resources for this release:</p>

<ul>
  <li><a href="/1.6/accumulo_user_manual.html">User Manual</a></li>
  <li><a href="/1.6/apidocs">Javadocs</a></li>
  <li><a href="/1.6/examples">Examples</a></li>
</ul>

<p>Users of 1.6.0 or 1.6.1 are strongly encouraged to update as soon as possible to benefit from
the improvements with very little concern in change of underlying functionality. Users of 1.4 or 1.6
are seeking to upgrade to 1.6 should consider 1.6.2 the starting point over 1.6.0 or 1.6.1.</p>

<h2 id="notable-bug-fixes">Notable Bug Fixes</h2>

<h3 id="only-first-zookeeper-server-is-used">Only first ZooKeeper server is used</h3>

<p>In constructing a <code class="language-plaintext highlighter-rouge">ZooKeeperInstance</code>, the user provides a comma-separated list of addresses for ZooKeeper
servers. 1.6.0 and 1.6.1 incorrectly truncated the provided list of ZooKeeper servers used to the first. This
would cause clients to fail when the first ZooKeeper server in the list became unavailable and not properly
load balance requests to all available servers in the quorum. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3218">ACCUMULO-3218</a> fixes the parsing of
the ZooKeeper quorum list to use all servers, not just the first.</p>

<h3 id="incorrectly-handled-zookeeper-exception">Incorrectly handled ZooKeeper exception</h3>

<p>Use of ZooKeeper’s API requires very careful exception handling as some thrown exceptions from the ZooKeeper
API are considered “normal” and must be retried by the client. In 1.6.1, Accumulo improved its handling of
these “expected failures” to better insulate calls to ZooKeeper; however, the wrapper which sets data to a ZNode
incorrectly handled all cases. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3448">ACCUMULO-3448</a> fixed the implementation of <code class="language-plaintext highlighter-rouge">ZooUtil.putData(...)</code> to handle
the expected error conditions correctly.</p>

<h3 id="scanid-is-not-set-in-activescan"><code class="language-plaintext highlighter-rouge">scanId</code> is not set in <code class="language-plaintext highlighter-rouge">ActiveScan</code></h3>

<p>The <code class="language-plaintext highlighter-rouge">ActiveScan</code> class is the returned object by <code class="language-plaintext highlighter-rouge">InstanceOperations.listScans</code>. This class represents a
“scan” running on Accumulo servers, either from a <code class="language-plaintext highlighter-rouge">Scanner</code> or <code class="language-plaintext highlighter-rouge">BatchScanner</code>. The <code class="language-plaintext highlighter-rouge">ActiveScan</code> class
is meant to represent all of the information that represents the scan and can be useful to administrators
or DevOps-types to observe and act on scans which are running for excessive periods of time. <a href="https://issues.apache.org/jira/browse/ACCUMULO-2641">ACCUMULO-2641</a>
fixes <code class="language-plaintext highlighter-rouge">ActiveScan</code> to ensure that the internal identifier <code class="language-plaintext highlighter-rouge">scanId</code> is properly set.</p>

<h3 id="table-state-change-doesnt-wait-when-requested">Table state change doesn’t wait when requested</h3>

<p>An Accumulo table has two states: <code class="language-plaintext highlighter-rouge">ONLINE</code> and <code class="language-plaintext highlighter-rouge">OFFLINE</code>. An offline table in Accumulo consumes no TabletServer
resources, only HDFS resources, which makes it useful to save infrequently used data. The Accumulo methods provided
to transition a state from <code class="language-plaintext highlighter-rouge">ONLINE</code> to <code class="language-plaintext highlighter-rouge">OFFLINE</code> and vice versa did not respect the <code class="language-plaintext highlighter-rouge">wait=true</code> parameter
when set. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3301">ACCUMULO-3301</a> fixes the underlying implementation to ensure that when <code class="language-plaintext highlighter-rouge">wait=true</code> is provided,
the method will not return until the table’s state transition has fully completed.</p>

<h3 id="keyvalue-doesnt-implement-hashcode-or-equals">KeyValue doesn’t implement <code class="language-plaintext highlighter-rouge">hashCode()</code> or <code class="language-plaintext highlighter-rouge">equals()</code></h3>

<p>The <code class="language-plaintext highlighter-rouge">KeyValue</code> class is an implementation of <code class="language-plaintext highlighter-rouge">Entry&lt;Key,Value&gt;</code> which is returned by the classes like
<code class="language-plaintext highlighter-rouge">Scanner</code> and <code class="language-plaintext highlighter-rouge">BatchScanner</code>. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3217">ACCUMULO-3217</a> adds these methods which ensure that the returned <code class="language-plaintext highlighter-rouge">Entry&lt;Key,Value&gt;</code>
operates as expected with <code class="language-plaintext highlighter-rouge">HashMaps</code> and <code class="language-plaintext highlighter-rouge">HashSets</code>.</p>

<h3 id="potential-deadlock-in-tabletserver">Potential deadlock in TabletServer</h3>

<p>Internal to the TabletServer, there are methods to construct instances of configuration objects for tables
and namespaces. The locking on these methods was not correctly implemented which created the possibility to
have concurrent requests to a TabletServer to deadlock. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3372">ACCUMULO-3372</a> found this problem while performing
bulk imports of RFiles into Accumulo. Additional synchronization was added server-side to prevent this deadlock
from happening in the future.</p>

<h3 id="the-datelexicoder-incorrectly-serialized-dates-prior-1970">The <code class="language-plaintext highlighter-rouge">DateLexicoder</code> incorrectly serialized <code class="language-plaintext highlighter-rouge">Dates</code> prior 1970</h3>

<p>The <code class="language-plaintext highlighter-rouge">DateLexicode</code>, a part of the <code class="language-plaintext highlighter-rouge">Lexicoders</code> classes which implement methods to convert common type primitives
into lexicographically sorting Strings/bytes, incorrectly converted <code class="language-plaintext highlighter-rouge">Date</code> objects for dates prior to 1970.
<a href="https://issues.apache.org/jira/browse/ACCUMULO-3385">ACCUMULO-3385</a> fixed the <code class="language-plaintext highlighter-rouge">DateLexicoder</code> to correctly (de)serialize data <code class="language-plaintext highlighter-rouge">Date</code> objects. For users with
data stored in Accumulo using the broken implementation, the following can be performed to read the old data.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Lexicoder lex = new ULongLexicoder();
  for (Entry&lt;Key, Value&gt; e : scanner) {
    Date d = new Date(lex.decode(TextUtil.getBytes(e.getKey().getRow())));
    // ...
  }
</code></pre></div></div>

<h3 id="reduce-miniaccumulocluster-failures-due-to-random-port-allocations">Reduce MiniAccumuloCluster failures due to random port allocations</h3>

<p><code class="language-plaintext highlighter-rouge">MiniAccumuloCluster</code> has had issues where it fails to properly start due to the way it attempts to choose
a random, unbound port on the local machine to start the ZooKeeper and Accumulo processes. Improvements have
been made, including retry logic, to withstand a few failed port choices. The changes made by <a href="https://issues.apache.org/jira/browse/ACCUMULO-3233">ACCUMULO-3233</a>
and the related issues should eliminate sporadic failures users of <code class="language-plaintext highlighter-rouge">MiniAccumuloCluster</code> might have observed.</p>

<h3 id="tracer-doesnt-handle-trace-table-state-transition">Tracer doesn’t handle trace table state transition</h3>

<p>The Tracer is an optional Accumulo server process that serializes Spans, elements of a distributed trace,
to the trace table for later inspection and correlation with other Spans. By default, the Tracer writes
to a “trace” table. In earlier versions of Accumulo, if this table was put offline, the Tracer would fail
to write new Spans to the table when it came back online. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3351">ACCUMULO-3351</a> ensures that the Tracer process
will resume writing Spans to the trace table when it transitions to online after being offline.</p>

<h3 id="tablet-not-major-compacting">Tablet not major compacting</h3>

<p>It was noticed that a system performing many bulk imports, there was a tablet with hundreds of files which
was not major compacting nor was scheduled to be major compacted. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3462">ACCUMULO-3462</a> identified as fix
server-side which would prevent this from happening in the future.</p>

<h3 id="yarn-job-submission-fails-with-hadoop-260">YARN job submission fails with Hadoop-2.6.0</h3>

<p>Hadoop 2.6.0 introduced a new component, the TimelineServer, which is a centralized metrics service designed
for other Hadoop components to leverage. MapReduce jobs submitted via <code class="language-plaintext highlighter-rouge">accumulo</code> and <code class="language-plaintext highlighter-rouge">tool.sh</code> failed to
run the job because it attempted to contact the TimelineServer and Accumulo was missing a dependency on
the classpath to communicate with the TimelineServer. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3230">ACCUMULO-3230</a> updates the classpath in the example
configuration files to include the necessary dependencies for the TimelineServer to ensure that YARN job
submission operates as previously.</p>

<h2 id="performance-improvements">Performance Improvements</h2>

<h3 id="user-scans-can-block-root-and-metadata-table-scans">User scans can block root and metadata table scans</h3>

<p>The TabletServer provides a feature to limit the number of open files as a resource management configuration.
To perform a scan against a normal table, the metadata and root table, when not cached, need to be consulted
first. With a sufficient number of concurrent scans against normal tables, adding to the open file count,
scans against the metadata and root tables could be blocked from running because no files can be opened.
This prevents other system operations from happening as expected. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3297">ACCUMULO-3297</a> fixes the internal semaphore
used to implement this resource management to ensure that root and metadata table scans can proceed.</p>

<h2 id="other-improvements">Other improvements</h2>

<h3 id="limit-available-ciphers-for-ssltls">Limit available ciphers for SSL/TLS</h3>

<p>Since Apache Accumulo 1.5.2 and 1.6.1, the <a href="https://en.wikipedia.org/wiki/POODLE">POODLE</a> man-in-the-middle attack was found which exploits a client’s
ability to fallback to the SSLv3.0 protocol. The main mitigation strategy was to prevent the use of old ciphers/protocols
when using SSL connectors. In Accumulo, both the Apache Thrift RPC servers and Jetty server for the Accumulo
monitor have the ability to enable SSL. <a href="https://issues.apache.org/jira/browse/ACCUMULO-3316">ACCUMULO-3316</a> is the parent issue which provides new configuration
properties in accumulo-site.xml which can limit the accepted ciphers/protocols. By default, insecure or out-dated
protocols have been removed from the default set in order to protect users by default.</p>

<h2 id="documentation">Documentation</h2>

<p>Documentation was added to the Administration chapter for moving from a Non-HA Namenode setup to an HA Namenode setup.
New chapters were added for the configuration of SSL and for summaries of Implementation Details (initially describing
FATE operations). A section was added to the Configuration chapter for describing how to arrive at optimal settings
for configuring an instance with native maps.</p>

<h2 id="testing">Testing</h2>

<p>Each unit and functional test only runs on a single node, while the RandomWalk and Continuous Ingest tests run
on any number of nodes. <em>Agitation</em> refers to randomly restarting Accumulo processes and Hadoop Datanode processes,
and, in HDFS High-Availability instances, forcing NameNode failover.</p>

<table id="release_notes_testing" class="table">
  <thead>
    <tr>
      <th>OS</th>
      <th>Hadoop</th>
      <th>Nodes</th>
      <th>ZooKeeper</th>
      <th>HDFS HA</th>
      <th>Tests</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Gentoo</td>
      <td>N/A</td>
      <td>1</td>
      <td>N/A</td>
      <td>No</td>
      <td>Unit and Integration Tests</td>
    </tr>
    <tr>
      <td>Mac OSX</td>
      <td>N/A</td>
      <td>1</td>
      <td>N/A</td>
      <td>No</td>
      <td>Unit and Integration Tests</td>
    </tr>
    <tr>
      <td>Fedora 21</td>
      <td>N/A</td>
      <td>1</td>
      <td>N/A</td>
      <td>No</td>
      <td>Unit and Integration Tests</td>
    </tr>
    <tr>
      <td>CentOS 6</td>
      <td>2.6</td>
      <td>20</td>
      <td>3.4.5</td>
      <td>No</td>
      <td>ContinuousIngest w/ verification w/ and w/o agitation (31B and 21B entries, respectively)</td>
    </tr>
  </tbody>
</table>



<hr>

<p><strong>View all releases in the <a href="/release/">archive</a></strong></p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.6.1/">&laquo;&nbsp;Apache Accumulo 1.6.1</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-1.6.3/">Apache Accumulo 1.6.3&nbsp;&raquo;</a></li>
      
    </ul></nav>

        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.
Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.</p>

  <p>Apache®, the names of Apache projects and their logos, and the multicolor feather
logo are registered trademarks or trademarks of The Apache Software Foundation
in the United States and/or other countries.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
