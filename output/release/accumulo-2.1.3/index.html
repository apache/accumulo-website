<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="/css/bootstrap/5.3.3/dist/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/css/fontawesome/fontawesome-free-6.6.0-web/css/all.css">
<link rel="stylesheet" type="text/css" href="/css/datatables/bs5/dt-2.0.8/datatables.css">
<link rel="stylesheet" type="text/css" href="/css/accumulo.css">

<title>Apache Accumulo 2.1.3</title>

<script type="text/javascript" src="/js/jquery/3.7.1/jquery.js"></script>
<script type="text/javascript" src="/js/bootstrap/5.3.3/dist/js/bootstrap.bundle.js"></script>
<script type="text/javascript" src="/js/datatables/bs5/dt-2.0.8/datatables.js"></script>
<script type="text/javascript" src="https://www.apachecon.com/event-images/snippet.js"></script>
<script type="text/javascript" src="/js/accumulo.js"></script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img alt="Apache Accumulo" id="nav-logo" src="/images/accumulo-logo.png" width="200">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-items">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
        <li class="nav-item"><a class="nav-link" href="/tour">Tour</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Releases</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/release/accumulo-3.0.0/">3.0.0 (Latest non-LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-2.1.2/">2.1.2 (Latest LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-1.10.4/">1.10.4 (Legacy LTM)</a></li>
            <li><a class="dropdown-item" href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Documentation</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/docs/2.x">User Manual (2.x)</a></li>
            <li><a class="dropdown-item" href="/docs/2.x/apidocs">Javadocs (2.x)</a></li>
            <li><a class="dropdown-item" href="/api">Public API</a></li>
            <li><a class="dropdown-item" href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a class="dropdown-item" href="/accumulo2-maven-plugin">Accumulo Maven Plugin</a></li>
            <li><a class="dropdown-item" href="/1.10/accumulo_user_manual.html">User Manual (1.10)</a></li>
            <li><a class="dropdown-item" href="/1.10/apidocs">Javadocs (1.10)</a></li>
            <li><a class="dropdown-item" href="/external-docs">External Docs</a></li>
            <li><a class="dropdown-item" href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Community</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/contact-us">Contact Us</a></li>
            <li><a class="dropdown-item" href="/how-to-contribute">How To Contribute</a></li>
            <li><a class="dropdown-item" href="/people">People</a></li>
            <li><a class="dropdown-item" href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="/search">Search</a></li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <img alt="Apache Software Foundation" src="https://www.apache.org/foundation/press/kit/feather.svg" width="15"/>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="https://www.apache.org">Apache Homepage <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship">Sponsorship <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/security">Security <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks">Thanks <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/privacy.html">Privacy Policy<span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/events/current-event.html">Current Event <span class="fa-solid fa-up-right-from-square"></span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Apache Accumulo 2.1.3</h1>
          
          

<p>10 Jul 2024</p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-2.1.2/">&laquo;&nbsp;Apache Accumulo 2.1.2</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-3.0.0/">Apache Accumulo 3.0.0&nbsp;&raquo;</a></li>
      
    </ul></nav>


<div class="alert alert-danger" style="margin-bottom: 0px;" role="alert">
  These are <strong>draft</strong> release notes for a future release of Accumulo!<br>
  Please view <a class="alert-link" href="/release/accumulo-2.1.2/">the latest release notes</a>.
</div>



<div class="alert alert-success" role="alert">
  This version is a current <strong><a class="alert-link" href="/contributor/versioning#LTM">Long Term Maintenance (LTM)</a></strong> release.
</div>


<h2 id="about">About</h2>

<p>Apache Accumulo 2.1.3 is a patch release of the 2.1 LTM line. It contains bug
fixes and minor enhancements. This version supersedes 2.1.2. Users upgrading to
2.1 should upgrade directly to this version instead of 2.1.2.</p>

<p>Included here are some highlights of the most interesting bugs fixed and
features added in 2.1.3. For the full set of changes, please see the commit
history or issue tracker.</p>

<h3 id="notable-improvements">Notable Improvements</h3>

<p>Improvements that affect performance:</p>

<ul>
  <li><a href="https://github.com/apache/accumulo/issues/3722">#3722</a> Adds properties <a href="/docs/2.x/configuration/server-properties#general_file_name_allocation_batch_size_min">general.file.name.allocation.batch.size.min</a> and
<a href="/docs/2.x/configuration/server-properties#general_file_name_allocation_batch_size_max">general.file.name.allocation.batch.size.max</a> that allow the batch size
for unique filename allocation in ZooKeeper to be configurable. In a system that requires large numbers
of unique names, larger batch sizes can reduce ZooKeeper contention because more file names can be
reserved with a single ZooKeeper call.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3733">#3733</a> Avoid creating server side threads when failed writes are cancelled. In versions 2.1.2
and earlier, the thrift close call creates a new thread to cancel the thrift session. With 2.1.3, an
new thrift method is available to test if a session is reserved and deletes it if it is not reserved
without creating an additional thread.  If the new method is not available it falls back to the previous
close method to preserve interoperability between 2.x versions.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3738">#3738</a> Adds parameter <a href="/docs/2.x/configuration/server-properties#gc_remove_in_use_candidates">gc.remove.in.use.candidates</a>, that enables the Garbage Collector
to remove candidates that have active tablet file references. This is expected to increase the speed of
subsequent GC Runs.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3756">#3756</a> Added new RPC named cancelUpdate that reduces the amount of threads waiting to close failed
batch write sessions.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4682">#4682</a> Changed the ScanServer ref format to sort by UUID to increase performance</li>
  <li><a href="https://github.com/apache/accumulo/issues/4536">#4536</a> Created ScanServerSelector that tries to use scan servers on the same host to leverage
shared off-heap-cache usage.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4544">#4544</a> Made scan servers refresh cached list of tablet files before expiration. Added new property
<a href="/docs/2.x/configuration/server-properties#sserver_cache_metadata_refresh_percent">sserver.cache.metadata.refresh.percent</a> to control when refresh happens.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3813">#3813</a> Made compactors use cached address for compaction coordinator when getting next compaction job.
This lowers load on zookeeper when running many compactors.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3706">#3706</a> Avoid unnescessary copying of hadoop config that was causing Accumulo GC slowdown.</li>
</ul>

<h3 id="notable-bug-fixes">Notable Bug Fixes</h3>

<ul>
  <li><a href="https://github.com/apache/accumulo/issues/3721">#3721</a> Fixes issue with writes happening in a retry after batch writer was closed. This
strengthens metadata consistency.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3749">#3749</a> Fixes issue where deleting a compaction pool with running compactions would
leave the tserver in a bad state.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3748">#3748</a> Fixes bug where wal could remained locked if an exception occurred.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3747">#3747</a> Adds validation to prevent possible deadlock when acquiring wal locks.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3737">#3737</a> Use custom Transport to set Transport message and frame size. This fixes
a bug where Accumulo would not change the max message size allowed.</li>
  <li><a href="https://github.com/apache/accumulo/issues/#608">##608</a>, <a href="https://github.com/apache/accumulo/issues/3755">#3755</a> Add validation to GC that checks that the scanner used by GC to determine
candidates for deletion returned a complete row as a mitigation for <a href="https://github.com/apache/accumulo/issues/#608">##608</a> where
garbage collector removes file that are referenced and in-use.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3744">#3744</a> Fixed bug regarding improperly created GCRun logger name.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3737">#3737</a> Adds a custom Transport Factory to set transport message and frame size to avoid infinite loops
as described in <a href="https://github.com/apache/accumulo/issues/3731">#3731</a>.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3750">#3750</a> Fixed issue when deleting a compaction thread pool would leave tablets in a bad state.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4117">#4117</a> Fixed a bug in compaction properties where the replacement <code class="language-plaintext highlighter-rouge">maxOpen</code> property was being
ignored in favor of the deprecated <code class="language-plaintext highlighter-rouge">open.max</code> property.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4681">#4681</a> Stopped listing all compactors in each compactor to reduce load on Zookeeper.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4309">#4309</a> Optimized logic for getting a random TabletServer connection which improved Shell startup times.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3873">#3873</a> Increase Thrift max message size defaults which avoids errors with large key values.  Added
property <a href="/docs/2.x/configuration/server-properties#rpc_message_size_max">rpc.message.size.max</a>.  Removed experimental properties <code class="language-plaintext highlighter-rouge">sserver.server.message.size.max</code>,
<code class="language-plaintext highlighter-rouge">compactor.message.size.max</code>,<code class="language-plaintext highlighter-rouge">compaction.coordinator.message.size.max</code>.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3966">#3966</a> Changed the default value of the the property <a href="/docs/2.x/configuration/server-properties#table_majc_compaction_strategy">table.majc.compaction.strategy</a>
to empty string to fix a compatibility bug with old and new compaction plugins.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4554">#4554</a>  Fixed a race condtion that could cause duplicate compactions to run.  While harmless in
terms of data, the duplicate compactions could waste significant compute resources.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4127">#4127</a> Updated new compaction plugins to honor <a href="/docs/2.x/configuration/server-properties#table_file_max">table.file.max</a> property.  Implemented
a much more efficient algorithm than old compaction plugins had for this property.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4485">#4485</a> Interrupt compactions on tablet unload.  This prevents long running compactions from blocking
tablet migration.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3512">#3512</a> Fixed issue with improperly cleaned up scans preventing metadata tablet unload.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4456">#4456</a> Setting empty property value no longer deletes property</li>
  <li><a href="https://github.com/apache/accumulo/issues/4000">#4000</a> Fixed bug that could cause bulk import to lose files when errors happened in the tablet server.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4462">#4462</a> Fixed bug that prevented listing Fate operations in some situations.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4573">#4573</a> Modified CredentialProviderToken to no longer store password in serialized form.</li>
</ul>

<h3 id="improvements-that-help-with-administration">Improvements that help with administration:</h3>

<ul>
  <li><a href="https://github.com/apache/accumulo/issues/3697">#3697</a> Allow <code class="language-plaintext highlighter-rouge">ACCUMULO_JAVA_PREFIX</code> option in <code class="language-plaintext highlighter-rouge">accumulo-env.sh</code> so it can be passed
as an array. This simplifies passing user options when starting Accumulo processes, for example
<code class="language-plaintext highlighter-rouge">numactl</code> parameters.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3751">#3751</a> Added property <a href="/docs/2.x/configuration/server-properties#rpc_backlog">rpc.backlog</a> to configure backlog size for
Thrift server sockets.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3745">#3745</a> Adds prefix to gc deletion log messages. This makes it easier to isolate the deletion
actions of the garbage collector for analysis.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3724">#3724</a> Adds logging of transactions when metadata and in-memory differences are detected.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3725">#3725</a> Changed the gc batch size from bytes to memory percentage value.  Modified default value of
property <a href="/docs/2.x/configuration/server-properties#gc_candidate_batch_size">gc.candidate.batch.size</a>.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3684">#3684</a> Consolidated y/n prompts in the shell. Users can now exit out of multi-table delete operations
without accepting prompts for each one.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3726">#3726</a> Adjusted reauthentication messages from the shell to assist with troubleshooting.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4461">#4461</a>, <a href="https://github.com/apache/accumulo/issues/4522">#4522</a>, <a href="https://github.com/apache/accumulo/issues/4577">#4577</a> Added various metrics for scan servers to determine scan reservations and usage</li>
  <li><a href="https://github.com/apache/accumulo/issues/4492">#4492</a> Emit new metrics for the caches in tablet and scan servers.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4459">#4459</a> Added the ability to specify multiple MeterRegistryFactorys to allow for various metric exporters
to be used at the same time.  Updated documentation on the property <a href="/docs/2.x/configuration/server-properties#general_micrometer_factory">general.micrometer.factory</a></li>
  <li><a href="https://github.com/apache/accumulo/issues/4622">#4622</a> Added compactor busy and server idle metrics <a href="https://github.com/apache/accumulo/issues/4740">#4740</a> to allow for proper scale-in operations.
Added property <a href="/docs/2.x/configuration/server-properties#general_metrics_process_idle">general.metrics.process.idle</a> to configure idle time for metrics.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3927">#3927</a> Added a new JSON property type that validates the value is json.  Updated the properties
<a href="/docs/2.x/configuration/server-properties#monitor_resources_external">monitor.resources.external</a> and <a href="/docs/2.x/configuration/server-properties#tserver_compaction_major_service_meta_planner_opts_executors">tserver.compaction.major.service.meta.planner.opts.executors</a> to use this new type.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4223">#4223</a> Added properties <a href="/docs/2.x/configuration/server-properties#compactor_wait_time_job_min">compactor.wait.time.job.min</a> and <a href="/docs/2.x/configuration/server-properties#compactor_wait_time_job_max">compactor.wait.time.job.max</a> to
control the min and max times compactors use when polling for work.</li>
  <li><a href="https://github.com/apache/accumulo/issues/3998">#3998</a> Added instance name tag to metrics.  This is useful for the case when metrics from multiple Accumulo instances
are flowing into a single metrics system.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4763">#4763</a> Improved the accumulo-cluster script and cluster.yaml file for the use case of starting and stopping specific
groups of compactors and scan servers.</li>
  <li><a href="https://github.com/apache/accumulo/issues/4487">#4487</a> Scan server properties can now be set in the shell.</li>
</ul>

<h2 id="upgrading">Upgrading</h2>

<p>View the <a href="/docs/2.x/administration/upgrading">Upgrading Accumulo documentation</a> for guidance.</p>

<h2 id="useful-links">Useful Links</h2>

<ul>
  <li><a href="https://github.com/apache/accumulo/milestone/17">All tickets related to this release</a></li>
</ul>

<p>This release also contains bug fixes from 1.10.4, which was released after 2.1.2.</p>



<hr>

<p><strong>View all releases in the <a href="/release/">archive</a></strong></p>
<nav aria-label="Navigate Release Notes"><ul class="pagination d-flex justify-content-between">
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-2.1.2/">&laquo;&nbsp;Apache Accumulo 2.1.2</a></li>
      
    
      
        <li class="page-item"><a class="page-link" href="/release/accumulo-3.0.0/">Apache Accumulo 3.0.0&nbsp;&raquo;</a></li>
      
    </ul></nav>

        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.
Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.</p>

  <p>Apache®, the names of Apache projects and their logos, and the multicolor feather
logo are registered trademarks or trademarks of The Apache Software Foundation
in the United States and/or other countries.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
