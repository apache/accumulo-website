<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="/css/bootstrap/5.3.3/dist/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/css/fontawesome/fontawesome-free-6.6.0-web/css/all.css">
<link rel="stylesheet" type="text/css" href="/css/datatables/bs5/dt-2.0.8/datatables.css">
<link rel="stylesheet" type="text/css" href="/css/accumulo.css">

<title>Accumulo Documentation - Basic Troubleshooting</title>

<script type="text/javascript" src="/js/jquery/3.7.1/jquery.js"></script>
<script type="text/javascript" src="/js/bootstrap/5.3.3/dist/js/bootstrap.bundle.js"></script>
<script type="text/javascript" src="/js/datatables/bs5/dt-2.0.8/datatables.js"></script>
<script type="text/javascript" src="https://www.apachecon.com/event-images/snippet.js"></script>
<script type="text/javascript" src="/js/accumulo.js"></script>
</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img alt="Apache Accumulo" id="nav-logo" src="/images/accumulo-logo.png" width="200">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-items">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
        <li class="nav-item"><a class="nav-link" href="/tour">Tour</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Releases</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/release/accumulo-3.0.0/">3.0.0 (Latest non-LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-2.1.3/">2.1.3 (Latest LTM)</a></li>
            <li><a class="dropdown-item" href="/release/accumulo-1.10.4/">1.10.4 (Legacy LTM)</a></li>
            <li><a class="dropdown-item" href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Documentation</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/docs/2.x">User Manual (2.x)</a></li>
            <li><a class="dropdown-item" href="/docs/2.x/apidocs">Javadocs (2.x)</a></li>
            <li><a class="dropdown-item" href="/api">Public API</a></li>
            <li><a class="dropdown-item" href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a class="dropdown-item" href="/accumulo2-maven-plugin">Accumulo Maven Plugin</a></li>
            <li><a class="dropdown-item" href="/1.10/accumulo_user_manual.html">User Manual (1.10)</a></li>
            <li><a class="dropdown-item" href="/1.10/apidocs">Javadocs (1.10)</a></li>
            <li><a class="dropdown-item" href="/external-docs">External Docs</a></li>
            <li><a class="dropdown-item" href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Community</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="/contact-us">Contact Us</a></li>
            <li><a class="dropdown-item" href="/how-to-contribute">How To Contribute</a></li>
            <li><a class="dropdown-item" href="/people">People</a></li>
            <li><a class="dropdown-item" href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="/search">Search</a></li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <img alt="Apache Software Foundation" src="https://www.apache.org/foundation/press/kit/feather.svg" width="15"/>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="https://www.apache.org">Apache Homepage <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship">Sponsorship <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/security">Security <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks">Thanks <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/foundation/policies/privacy.html">Privacy Policy<span class="fa-solid fa-up-right-from-square"></span></a></li>
            <li><a class="dropdown-item" href="https://www.apache.org/events/current-event.html">Current Event <span class="fa-solid fa-up-right-from-square"></span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <div class="alert alert-danger" style="margin-bottom: 0px;" role="alert">
  This is a <strong>draft</strong> user guide for a future release of Accumulo 4.0.0!<br>
</div>

<div class="row">
  <div class="col-md-3">
    <div class="accordion sticky-top" id="myAccordion" style="top: 100px;">
      
      
      
        
          
        
          
        
          
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headinggetting-started">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsegetting-started" aria-expanded="false" aria-controls="collapsegetting-started">
                  Getting started
                </button>
              </div>
              <div id="collapsegetting-started" class="accordion-collapse collapse" aria-labelledby="headinggetting-started" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row"><a href="/docs/4.x/getting-started/quickstart">Setup</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/design">Design</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/features">Features</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/clients">Accumulo Clients</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/shell">Accumulo Shell</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/table_design">Table Design</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/table_configuration">Table Configuration</a></div>
                  
                    <div class="row"><a href="/docs/4.x/getting-started/glossary">Glossary</a></div>
                  
                </div>
              </div>
            </div>
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headingdevelopment">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsedevelopment" aria-expanded="false" aria-controls="collapsedevelopment">
                  Development
                </button>
              </div>
              <div id="collapsedevelopment" class="accordion-collapse collapse" aria-labelledby="headingdevelopment" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row"><a href="/docs/4.x/development/iterators">Iterators</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/mapreduce">MapReduce</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/spark">Spark</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/development_tools">Development Tools</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/sampling">Sampling</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/summaries">Summary Statistics</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/proxy">Proxy</a></div>
                  
                    <div class="row"><a href="/docs/4.x/development/high_speed_ingest">High-Speed Ingest</a></div>
                  
                </div>
              </div>
            </div>
          
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headingsecurity">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsesecurity" aria-expanded="false" aria-controls="collapsesecurity">
                  Security
                </button>
              </div>
              <div id="collapsesecurity" class="accordion-collapse collapse" aria-labelledby="headingsecurity" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row"><a href="/docs/4.x/security/overview">Security Overview</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/authentication">Authentication</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/permissions">Permissions</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/authorizations">Authorizations</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/on-disk-encryption">On Disk Encryption</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/wire-encryption">Wire Encryption</a></div>
                  
                    <div class="row"><a href="/docs/4.x/security/kerberos">Kerberos</a></div>
                  
                </div>
              </div>
            </div>
          
        
          
        
      
        
          
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headingconfiguration">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseconfiguration" aria-expanded="false" aria-controls="collapseconfiguration">
                  Configuration
                </button>
              </div>
              <div id="collapseconfiguration" class="accordion-collapse collapse" aria-labelledby="headingconfiguration" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row"><a href="/docs/4.x/configuration/overview">Configuration Overview</a></div>
                  
                    <div class="row"><a href="/docs/4.x/configuration/files">Configuration Files</a></div>
                  
                    <div class="row"><a href="/docs/4.x/configuration/client-properties">Client Properties (4.x)</a></div>
                  
                    <div class="row"><a href="/docs/4.x/configuration/server-properties">Server Properties (4.x)</a></div>
                  
                    <div class="row"><a href="/docs/4.x/configuration/metrics">Metrics Documentation (4.x)</a></div>
                  
                </div>
              </div>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headingadministration">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseadministration" aria-expanded="false" aria-controls="collapseadministration">
                  Administration
                </button>
              </div>
              <div id="collapseadministration" class="accordion-collapse collapse" aria-labelledby="headingadministration" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row"><a href="/docs/4.x/administration/in-depth-install">In-depth Installation</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/monitoring-metrics">Monitoring & Metrics</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/fate">FATE</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/multivolume">Multi-Volume Installations</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/replication">Replication</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/caching">Caching</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/compaction">Compactions</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/merging">Merging</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/upgrading">Upgrading Accumulo</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/scan-executors">Scan Executors</a></div>
                  
                    <div class="row"><a href="/docs/4.x/administration/erasure-coding">Erasure Coding</a></div>
                  
                </div>
              </div>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="accordion-item">
              <div class="accordion-header fs-5 fw-bold" id="headingtroubleshooting">
                <button class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapsetroubleshooting" aria-expanded="true" aria-controls="collapsetroubleshooting">
                  Troubleshooting
                </button>
              </div>
              <div id="collapsetroubleshooting" class="accordion-collapse collapse show" aria-labelledby="headingtroubleshooting" data-bs-parent="#myAccordion">
                <div class="accordion-body">
                  
                  
                    <div class="row selected"><a href="/docs/4.x/troubleshooting/basic">Basic Troubleshooting</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/advanced">Advanced Troubleshooting</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/tools">Troubleshooting Tools</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/system-metadata-tables">System Metadata Tables</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/performance">Performance</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/tracing">Tracing</a></div>
                  
                    <div class="row"><a href="/docs/4.x/troubleshooting/zookeeper">ZooKeeper</a></div>
                  
                </div>
              </div>
            </div>
          
        
      
    </div>
  </div>
  <div class="col-md-9">
    
    <p>Accumulo 4.x Documentation &gt;&gt; Troubleshooting &gt;&gt; Basic Troubleshooting</p>
    
    
    <div class="row mt-4">
      <div class="col-md-12 d-flex justify-content-between">
        <h1>Basic Troubleshooting</h1>
        <a href="https://github.com/apache/accumulo-website/edit/main/_docs-4/troubleshooting/basic.md" role="button"><span class="fa-solid fa-pen-to-square"></span> <small>Edit this page</small></a>
      </div>
    </div>
    
    <h2 id="general">General</h2>

<p><strong>The tablet server does not seem to be running!? What happened?</strong></p>

<p>Accumulo is a distributed system.  It is supposed to run on remote
equipment, across hundreds of computers.  Each program that runs on
these remote computers writes down events as they occur, into a local
file. By default, this is defined in <code class="language-plaintext highlighter-rouge">conf/accumulo-env.sh</code> as <code class="language-plaintext highlighter-rouge">ACCUMULO_LOG_DIR</code>.
Look in the <code class="language-plaintext highlighter-rouge">$ACCUMULO_LOG_DIR/tserver*.log</code> file.  Specifically, check the end of the file.</p>

<p><strong>The tablet server did not start and the debug log does not exist!  What happened?</strong></p>

<p>When the individual programs are started, the stdout and stderr output
of these programs are stored in <code class="language-plaintext highlighter-rouge">.out</code> and <code class="language-plaintext highlighter-rouge">.err</code> files in
<code class="language-plaintext highlighter-rouge">$ACCUMULO_LOG_DIR</code>.  Often, when there are missing configuration
options, files or permissions, messages will be left in these files.
Probably a start-up problem.  Look in <code class="language-plaintext highlighter-rouge">$ACCUMULO_LOG_DIR/tserver*.err</code></p>

<p><strong>Accumulo is not working, what’s wrong?</strong></p>

<p>There’s a small web server that collects information about all the
components that make up a running Accumulo instance. It will highlight
unusual or unexpected conditions.</p>

<p>Point your browser to the monitor (typically the manager host, on port 9995).  Is anything red or yellow?</p>

<p><strong>My browser is reporting connection refused, and I cannot get to the monitor</strong></p>

<p>The monitor program’s output is also written to .err and .out files in
the <code class="language-plaintext highlighter-rouge">$ACCUMULO_LOG_DIR</code>. Look for problems in this file if the
<code class="language-plaintext highlighter-rouge">$ACCUMULO_LOG_DIR/monitor*.log</code> file does not exist.</p>

<p>The monitor program is probably not running.  Check the log files for errors.</p>

<p><strong>My browser hangs trying to talk to the monitor.</strong></p>

<p>Your browser needs to be able to reach the monitor program.  Often
large clusters are firewalled, or use a VPN for internal
communications. You can use SSH to proxy your browser to the cluster,
or consult with your system administrator to gain access to the server
from your browser.</p>

<p>It is sometimes helpful to use a text-only browser to sanity-check the
monitor while on the machine running the monitor:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ links http://localhost:9995
</code></pre></div></div>

<p>Verify that you are not firewalled from the monitor if it is running on a remote host.</p>

<p><strong>The monitor responds, but there are no numbers for tservers and tables.  The summary page says the manager is down.</strong></p>

<p>The monitor program gathers all the details about the manager and the
tablet servers through the manager. It will be mostly blank if the
manager is down. Check for a running manager.</p>

<p><strong>The ZooKeeper information is not available on the Overview page.</strong></p>

<p>The monitor uses the ZooKeeper <code class="language-plaintext highlighter-rouge">stat</code> <a href="https://zookeeper.apache.org/doc/r3.5.7/zookeeperAdmin.html#sc_4lw">four-letter-word</a> command to retrieve information.
The ZooKeeper configuration may require explicitly listing the <code class="language-plaintext highlighter-rouge">stat</code> command in the four-letter-word whitelist.</p>

<p><strong>I’ve lost the Accumulo root password, now what?</strong></p>

<p>Running <code class="language-plaintext highlighter-rouge">accumulo init --reset-security</code> will prompt you for a new root password. CAUTION: this command will delete all existing users. You will need to re-create all other users and set permissions accordingly. Running the <code class="language-plaintext highlighter-rouge">accumulo admin dumpConfig</code> command will output current configuration, including current users, which may aid in this process.</p>

<h2 id="accumulo-processes">Accumulo Processes</h2>

<p><strong>My tablet server crashed!  The logs say that it lost its zookeeper lock.</strong></p>

<p>Tablet servers reserve a lock in zookeeper to maintain their ownership
over the tablets that have been assigned to them.  Part of their
responsibility for keeping the lock is to send zookeeper a keep-alive
message periodically.  If the tablet server fails to send a message in
a timely fashion, zookeeper will remove the lock and notify the tablet
server.  If the tablet server does not receive a message from
zookeeper, it will assume its lock has been lost, too.  If a tablet
server loses its lock, it kills itself: everything assumes it is dead
already.</p>

<p>Investigate why the tablet server did not send a timely message to
zookeeper.</p>

<p><strong>I need to decommission a node.  How do I stop the tablet server on it?</strong></p>

<p>Use the admin command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ accumulo admin stop hostname:9997
2013-07-16 13:15:38,403 [util.Admin] INFO : Stopping server 12.34.56.78:9997
</code></pre></div></div>

<p><strong>I cannot login to a tablet server host, and the tablet server will not shut down.  How can I kill the server?</strong></p>

<p>Sometimes you can kill a “stuck” tablet server by deleting its lock in zookeeper:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ accumulo org.apache.accumulo.server.util.TabletServerLocks --list
                  127.0.0.1:9997 TSERV_CLIENT=127.0.0.1:9997
$ accumulo org.apache.accumulo.server.util.TabletServerLocks -delete 127.0.0.1:9997
$ accumulo org.apache.accumulo.server.util.TabletServerLocks -list
                  127.0.0.1:9997             null
</code></pre></div></div>

<p>You can find the manager and instance id for any accumulo instances using the same zookeeper instance:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ accumulo org.apache.accumulo.server.util.ListInstances
INFO : Using ZooKeepers localhost:2181

 Instance Name       | Instance ID                          | Manager
---------------------+--------------------------------------+-------------------------------
              "test" | 6140b72e-edd8-4126-b2f5-e74a8bbe323b |                127.0.0.1:9999
</code></pre></div></div>

<p><strong>One of my Accumulo processes died. How do I bring it back?</strong></p>

<p>The easiest way to bring all services online for an Accumulo instance is to run the <code class="language-plaintext highlighter-rouge">accumulo-cluster</code> script.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ accumulo-cluster start
</code></pre></div></div>

<p>This process will check the process listing, using <code class="language-plaintext highlighter-rouge">jps</code> on each host before attempting to restart a service on the given host.
Typically, this check is sufficient except in the face of a hung/zombie process. For large clusters, it may be
undesirable to ssh to every node in the cluster to ensure that all hosts are running the appropriate processes and <code class="language-plaintext highlighter-rouge">accumulo-service</code> may be of use.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ssh host_with_dead_process
$ accumulo-service tserver start
</code></pre></div></div>

<p><strong>My process died again. Should I restart it via <code class="language-plaintext highlighter-rouge">cron</code> or tools like <code class="language-plaintext highlighter-rouge">supervisord</code>?</strong></p>

<p>A repeatedly dying Accumulo process is a sign of a larger problem. Typically, these problems are due to a
misconfiguration of Accumulo or over-saturation of resources. Blind automation of any service restart inside of Accumulo
is generally an undesirable situation as it is indicative of a problem that is being masked and ignored. Accumulo
processes should be stable on the order of months and not require frequent restart.</p>

<h2 id="accumulo-clients">Accumulo Clients</h2>

<p><strong>Accumulo is not showing me any data!</strong></p>

<p>Is your client configured with authorizations that match your visibilities?  See the
<a href="/docs/4.x/security/authorizations">Authorizations documentation</a> for help.</p>

<p><strong>What are my visibilities?</strong></p>

<p>Use the <a href="/docs/4.x/troubleshooting/tools#RFileInfo">rfile-info</a> tool on a representative file to get some idea
of the visibilities in the underlying data.</p>

<p>Note that the use of <code class="language-plaintext highlighter-rouge">rfile-info</code> is an administrative tool and can only
be used by someone who can access the underlying Accumulo data. It
does not provide the normal access controls in Accumulo.</p>

<h2 id="ingest">Ingest</h2>

<p><strong>Why does my ingest rate periodically go down during heavy ingest?</strong></p>

<p>Periods of zero or low ingest rates can be caused by Java garbage collection pauses in tablet servers. This problem
can be mitigated by <a href="/docs/4.x/administration/in-depth-install#native-map">enabling native maps in tablet servers</a>.</p>

<h2 id="hdfs">HDFS</h2>

<p>Accumulo reads and writes to the Hadoop Distributed File System.
Accumulo needs this file system available at all times for normal operations.</p>

<p><strong>Accumulo is having problems “getting a block blk_1234567890123”. How do I fix it?</strong></p>

<p>This troubleshooting guide does not cover HDFS, but in general, you
want to make sure that all the datanodes are running and an fsck check
finds the file system clean:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ hadoop fsck /accumulo
</code></pre></div></div>

<p>You can use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ hadoop fsck /accumulo/path/to/corrupt/file -locations -blocks -files
</code></pre></div></div>

<p>to locate the block references of individual corrupt files and use those
references to search the name node and individual data node logs to determine which
servers those blocks have been assigned and then try to fix any underlying file
system issues on those nodes.</p>

<p>On a larger cluster, you may need to increase the number of Xcievers for HDFS DataNodes:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>dfs.datanode.max.xcievers<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>4096<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</code></pre></div></div>

<p>Verify HDFS is healthy, check the datanode logs.</p>

<h2 id="zookeeper">Zookeeper</h2>

<p><strong>The <code class="language-plaintext highlighter-rouge">accumulo init</code> command is hanging. It says something about talking to zookeeper.</strong></p>

<p>Zookeeper is also a distributed service.  You will need to ensure that
it is up.  You can run the zookeeper command line tool to connect to
any one of the zookeeper servers:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ zkCli.sh -server zoohost
...
[zk: zoohost:2181(CONNECTED) 0]
</code></pre></div></div>

<p>It is important to see the word <code class="language-plaintext highlighter-rouge">CONNECTED</code>!  If you only see
<code class="language-plaintext highlighter-rouge">CONNECTING</code> you will need to diagnose zookeeper errors.</p>

<p>Check to make sure that zookeeper is up, and that
<code class="language-plaintext highlighter-rouge">accumulo.properties</code> has been pointed to
your zookeeper server(s).</p>

<p><strong>Zookeeper is running, but it does not say CONNECTED</strong></p>

<p>Zookeeper processes talk to each other to elect a leader.  All updates
go through the leader and propagate to a majority of all the other
nodes.  If a majority of the nodes cannot be reached, zookeeper will
not allow updates.  Zookeeper also limits the number connections to a
server from any other single host.  By default, this limit can be as small as 10
and can be reached in some everything-on-one-machine test configurations.</p>

<p>You can check the election status and connection status of clients by
asking the zookeeper nodes for their status.  You connect to zookeeper
and ask it with the four-letter <code class="language-plaintext highlighter-rouge">stat</code> command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nc zoohost 2181
stat
Zookeeper version: 3.4.5-1392090, built on 09/30/2012 17:52 GMT
Clients:
 /127.0.0.1:58289[0](queued=0,recved=1,sent=0)
 /127.0.0.1:60231[1](queued=0,recved=53910,sent=53915)

Latency min/avg/max: 0/5/3008
Received: 1561459
Sent: 1561592
Connections: 2
Outstanding: 0
Zxid: 0x621a3b
Mode: standalone
Node count: 22524
</code></pre></div></div>

<p>Check zookeeper status, verify that it has a quorum, and has not exceeded maxClientCnxns.</p>


    <div class="row mt-4">
      <div class="col-md-12 d-flex justify-content-between">
        <strong>Find documentation for all releases in the <a href="/docs-archive">archive</strong>
        <a href="https://github.com/apache/accumulo-website/edit/main/_docs-4/troubleshooting/basic.md" role="button"><span class="fa-solid fa-pen-to-square"></span> <small>Edit this page</small></a>
      </div>
    </div>
  </div>
</div>

        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright © 2011-2025 <a href="https://www.apache.org">The Apache Software Foundation</a>.
Licensed under the <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.</p>

  <p>Apache®, the names of Apache projects and their logos, and the multicolor feather
logo are registered trademarks or trademarks of The Apache Software Foundation
in the United States and/or other countries.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
